import{G as n,_ as t,a as e,b as r,c as s,i as a,d as o,S as i,s as c,e as u,f,g as l,q as d,h,j as m,k as g,m as p,n as v,o as $,p as R,r as w,E as x,u as F,v as y,x as k,H as j,l as b,y as E,z as L,w as D}from"./client.6b59d216.js";import{f as M}from"./Banner.9532effb.js";import"./_common-styles.9c34c28b.js";import{g as I,M as S,R as q,s as A}from"./Modal.b8d58022.js";function N(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var s,a=e(n);if(t){var o=e(this).constructor;s=Reflect.construct(a,arguments,o)}else s=a.apply(this,arguments);return r(this,s)}}function O(n){var t,e,r,s,a;return(e=new q({props:{ratingName:"English monarchs",linkedRatingName:"consorts",ratingImageSrc:"english-monarch-crown.jpg",ratingImageAlt:"English monarch crown",scores:n[3],sortField:n[0],showLinkedRatings:n[1],nameFilter:n[2]}})).$on("change",n[4]),{c:function(){t=u("div"),l(e.$$.fragment)},l:function(n){t=h(n,"DIV",{});var r=b(t);p(e.$$.fragment,r),r.forEach(m)},m:function(n,r){R(n,t,r),w(e,t,null),a=!0},p:function(n,t){var r={};8&t&&(r.scores=n[3]),1&t&&(r.sortField=n[0]),2&t&&(r.showLinkedRatings=n[1]),4&t&&(r.nameFilter=n[2]),e.$set(r)},i:function(n){a||(F(e.$$.fragment,n),E((function(){s&&s.end(1),r||(r=L(t,M,{delay:300,duration:200})),r.start()})),a=!0)},o:function(n){y(e.$$.fragment,n),r&&r.invalidate(),s=D(t,M,{duration:200}),a=!1},d:function(n){n&&m(t),k(e),n&&s&&s.end()}}}function P(n){var t,e,r,s;return r=new S({props:{$$slots:{default:[O]},$$scope:{ctx:n}}}),{c:function(){t=u("meta"),e=f(),l(r.$$.fragment),this.h()},l:function(n){var s=d('[data-svelte="svelte-yx9k2o"]',document.head);t=h(s,"META",{name:!0,content:!0}),s.forEach(m),e=g(n),p(r.$$.fragment,n),this.h()},h:function(){document.title="Rexplorer monarchs",v(t,"name","Description"),v(t,"content","Rexplorer for exploring Rex Factor scores for English Monarchs")},m:function(n,a){$(document.head,t),R(n,e,a),w(r,n,a),s=!0},p:function(n,t){var e=x(t,1)[0],s={};47&e&&(s.$$scope={dirty:e,ctx:n}),r.$set(s)},i:function(n){s||(F(r.$$.fragment,n),s=!0)},o:function(n){y(r.$$.fragment,n),s=!1},d:function(n){m(t),n&&m(e),k(r,n)}}}var _=function(n,t,e,r){return new(e||(e=Promise))((function(s,a){function o(n){try{c(r.next(n))}catch(n){a(n)}}function i(n){try{c(r.throw(n))}catch(n){a(n)}}function c(n){var t;n.done?s(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(o,i)}c((r=r.apply(n,t||[])).next())}))};function z(t){return _(this,void 0,void 0,n.mark((function e(){var r,s;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.fetch("data/monarchs.json");case 2:return r=n.sent,n.next=5,r.json();case 5:if(s=n.sent,200!==r.status){n.next=11;break}return((null==s?void 0:s.scores)||[]).forEach((function(n){n.linkedRatings=n.consorts||[]})),n.abrupt("return",Object.assign(Object.assign({},I(t.query)),s));case 11:this.error(r.status,s.message);case 12:case"end":return n.stop()}}),e,this)})))}function B(n,t,e){var r=t.scores,s=void 0===r?[]:r,a=t.sortField,o=void 0===a?null:a,i=t.showLinkedRatings,c=void 0!==i&&i,u=t.nameFilter,f=void 0===u?null:u;j((function(){return A({sortField:o,showLinkedRatings:c,nameFilter:f})}));return n.$$set=function(n){"scores"in n&&e(3,s=n.scores),"sortField"in n&&e(0,o=n.sortField),"showLinkedRatings"in n&&e(1,c=n.showLinkedRatings),"nameFilter"in n&&e(2,f=n.nameFilter)},[o,c,f,s,function(n){console.log(n),e(0,o=n.detail.sortField),e(1,c=n.detail.showLinkedRatings),e(2,f=n.detail.nameFilter)}]}var G=function(n){t(r,i);var e=N(r);function r(n){var t;return s(this,r),t=e.call(this),a(o(t),n,B,P,c,{scores:3,sortField:0,showLinkedRatings:1,nameFilter:2}),t}return r}();export default G;export{z as preload};
