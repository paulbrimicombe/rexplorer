import{_ as n,a as t,b as e,c as r,i as o,s as a,d as c,S as u,e as s,A as i,h as f,l,B as p,j as v,n as d,p as h,o as m,E as g,F as y,t as $,f as x,k as w,a3 as k,Q as b,v as D,R as E,u as R,a5 as A,H as I,g as V,m as S,r as C,y as P,V as j,x as O,aa as F,z as M,w as Y}from"./client.028aac25.js";import{s as z,a as q,f as B}from"./index.a9bc3a68.js";import"./_common-styles.9c34c28b.js";import{C as L,M as _}from"./Modal.19ddc069.js";function W(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var o,a=t(n);if(r){var c=t(this).constructor;o=Reflect.construct(a,arguments,c)}else o=a.apply(this,arguments);return e(this,o)}}function U(n){var t,e,r;return{c:function(){t=s("div"),e=s("div"),r=i(n[0]),this.h()},l:function(o){t=f(o,"DIV",{class:!0});var a=l(t);e=f(a,"DIV",{});var c=l(e);r=p(c,n[0]),c.forEach(v),a.forEach(v),this.h()},h:function(){d(t,"class","popup svelte-1eosodn")},m:function(n,o){h(n,t,o),m(t,e),m(e,r)},p:function(n,t){1&g(t,1)[0]&&y(r,n[0])},i:$,o:$,d:function(n){n&&v(t)}}}function G(n,t,e){var r=t.message;return n.$$set=function(n){"message"in n&&e(0,r=n.message)},[r]}var H=function(t){n(s,u);var e=W(s);function s(n){var t;return r(this,s),t=e.call(this),o(c(t),n,G,U,a,{message:0}),t}return s}();function N(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var o,a=t(n);if(r){var c=t(this).constructor;o=Reflect.construct(a,arguments,c)}else o=a.apply(this,arguments);return e(this,o)}}function Q(n){var t,e,r,o;return e=new L({props:{rating:null}}),{c:function(){t=s("div"),V(e.$$.fragment)},l:function(n){t=f(n,"DIV",{});var r=l(t);S(e.$$.fragment,r),r.forEach(v)},m:function(n,r){h(n,t,r),C(e,t,null),o=!0},p:$,i:function(n){o||(R(e.$$.fragment,n),P((function(){r||(r=j(t,q,{x:-500,y:50,duration:300},!0)),r.run(1)})),o=!0)},o:function(n){D(e.$$.fragment,n),r||(r=j(t,q,{x:-500,y:50,duration:300},!1)),r.run(0),o=!1},d:function(n){n&&v(t),O(e),n&&r&&r.end()}}}function T(n){var t,e,r,o;return(e=new L({props:{rating:n[0],clickableCategories:!n[6]&&"player"===n[7]}})).$on("select",n[10]),{c:function(){t=s("div"),V(e.$$.fragment)},l:function(n){t=f(n,"DIV",{});var r=l(t);S(e.$$.fragment,r),r.forEach(v)},m:function(n,r){h(n,t,r),C(e,t,null),o=!0},p:function(n,t){var r={};1&t&&(r.rating=n[0]),192&t&&(r.clickableCategories=!n[6]&&"player"===n[7]),e.$set(r)},i:function(n){o||(R(e.$$.fragment,n),P((function(){r||(r=j(t,q,{x:-500,y:50,duration:300},!0)),r.run(1)})),o=!0)},o:function(n){D(e.$$.fragment,n),r||(r=j(t,q,{x:-500,y:50,duration:300},!1)),r.run(0),o=!1},d:function(n){n&&v(t),O(e),n&&r&&r.end()}}}function J(n){var t;return{c:function(){t=s("div")},l:function(n){t=f(n,"DIV",{}),l(t).forEach(v)},m:function(n,e){h(n,t,e)},p:$,i:$,o:$,d:function(n){n&&v(t)}}}function K(n){var t,e,r,o;return e=new L({props:{rating:null}}),{c:function(){t=s("div"),V(e.$$.fragment)},l:function(n){t=f(n,"DIV",{});var r=l(t);S(e.$$.fragment,r),r.forEach(v)},m:function(n,r){h(n,t,r),C(e,t,null),o=!0},p:$,i:function(n){o||(R(e.$$.fragment,n),P((function(){r||(r=j(t,q,{x:500,y:-50,duration:600},!0)),r.run(1)})),o=!0)},o:function(n){D(e.$$.fragment,n),r||(r=j(t,q,{x:500,y:-50,duration:600},!1)),r.run(0),o=!1},d:function(n){n&&v(t),O(e),n&&r&&r.end()}}}function X(n){var t,e,r,o;return e=new L({props:{rating:n[1],clickableCategories:!1}}),{c:function(){t=s("div"),V(e.$$.fragment)},l:function(n){t=f(n,"DIV",{});var r=l(t);S(e.$$.fragment,r),r.forEach(v)},m:function(n,r){h(n,t,r),C(e,t,null),o=!0},p:function(n,t){var r={};2&t&&(r.rating=n[1]),e.$set(r)},i:function(n){o||(R(e.$$.fragment,n),P((function(){r||(r=j(t,q,{x:500,y:-50,duration:600},!0)),r.run(1)})),o=!0)},o:function(n){D(e.$$.fragment,n),r||(r=j(t,q,{x:500,y:-50,duration:600},!1)),r.run(0),o=!1},d:function(n){n&&v(t),O(e),n&&r&&r.end()}}}function Z(n){var t;return{c:function(){t=s("div")},l:function(n){t=f(n,"DIV",{}),l(t).forEach(v)},m:function(n,e){h(n,t,e)},p:$,i:$,o:$,d:function(n){n&&v(t)}}}function nn(n){var t,e,r,o,a,c,u,$,A,I,V,S,C,P,j,O,F,M,Y=[J,T,Q],z=[];function q(n,t){return n[4]?0:n[0]?1:2}S=q(n),C=z[S]=Y[S](n);var B=[Z,X,K],L=[];function _(n,t){return n[5]?0:n[1]?1:2}return O=_(n),F=L[O]=B[O](n),{c:function(){t=s("game-board"),e=s("play-area"),r=s("div"),o=i("You: "),a=i(n[2]),c=x(),u=s("div"),$=i("Dunstan the Fun Sponge: "),A=i(n[3]),I=x(),V=s("card-area"),C.c(),P=x(),j=s("card-area"),F.c(),this.h()},l:function(s){t=f(s,"GAME-BOARD",{class:!0});var i=l(t);e=f(i,"PLAY-AREA",{class:!0});var d=l(e);r=f(d,"DIV",{class:!0});var h=l(r);o=p(h,"You: "),a=p(h,n[2]),h.forEach(v),c=w(d),u=f(d,"DIV",{class:!0});var m=l(u);$=p(m,"Dunstan the Fun Sponge: "),A=p(m,n[3]),m.forEach(v),I=w(d),V=f(d,"CARD-AREA",{});var g=l(V);C.l(g),g.forEach(v),P=w(d),j=f(d,"CARD-AREA",{});var y=l(j);F.l(y),y.forEach(v),d.forEach(v),i.forEach(v),this.h()},h:function(){d(r,"class","score svelte-1uzxkqf"),d(u,"class","score svelte-1uzxkqf"),k(e,"class","svelte-1uzxkqf"),k(t,"class","svelte-1uzxkqf")},m:function(n,s){h(n,t,s),m(t,e),m(e,r),m(r,o),m(r,a),m(e,c),m(e,u),m(u,$),m(u,A),m(e,I),m(e,V),z[S].m(V,null),m(e,P),m(e,j),L[O].m(j,null),M=!0},p:function(n,t){var e=g(t,1)[0];(!M||4&e)&&y(a,n[2]),(!M||8&e)&&y(A,n[3]);var r=S;(S=q(n))===r?z[S].p(n,e):(b(),D(z[r],1,1,(function(){z[r]=null})),E(),(C=z[S])?C.p(n,e):(C=z[S]=Y[S](n)).c(),R(C,1),C.m(V,null));var o=O;(O=_(n))===o?L[O].p(n,e):(b(),D(L[o],1,1,(function(){L[o]=null})),E(),(F=L[O])?F.p(n,e):(F=L[O]=B[O](n)).c(),R(F,1),F.m(j,null))},i:function(n){M||(R(C),R(F),M=!0)},o:function(n){D(C),D(F),M=!1},d:function(n){n&&v(t),z[S].d(),L[O].d()}}}function tn(n,t,e){var r,o,a,c,u,s,i,f,l=this&&this.__awaiter||function(n,t,e,r){return new(e||(e=Promise))((function(o,a){function c(n){try{s(r.next(n))}catch(n){a(n)}}function u(n){try{s(r.throw(n))}catch(n){a(n)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(c,u)}s((r=r.apply(n,t||[])).next())}))},p=t.scores,v=A("simple-modal"),d=function(n){return new Promise((function(t){return setTimeout(t,n)}))},h=null,m=null,g={styleBg:{background:"none",top:"1em",left:0},styleWindow:{background:"rgba(0,0,0,0.8)",width:"fit-content"},styleContent:{},transitionWindow:z,styleCloseButton:{display:"none",cursor:"pointer",borderRadius:"30%",boxShadow:"0 0 0 1px #00000033"}},y=function(){var n=function(n){for(var t=F(n),e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),o=[t[r],t[e]];t[e]=o[0],t[r]=o[1]}return t}(p);r=n.splice(n.length/2),o=n,e(2,a=r.length),e(3,c=o.length),e(7,f="player"),e(4,u=!1),e(5,s=!1),e(6,i=!1)},$=function(n){var t=n.message,r=n.closeAfter,o=void 0===r?1e3:r;return l(void 0,void 0,void 0,I.mark((function n(){var r,a,c;return I.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!i,e(6,i=!0),a=function(){v.close()},"undefined"!=typeof document&&document.addEventListener("keypress",a),c=new Promise((function(n){v.isOpen=!0,v.open(H,{message:t},g,{onClose:function(){return l(void 0,void 0,void 0,I.mark((function t(){return I.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v.isOpen=!1,n();case 2:case"end":return t.stop()}}),t)})))}})})),n.next=7,Promise.race([c,d(o)]);case 7:v.isClosed||v.close(),v.isOpen=!1,"undefined"!=typeof document&&document.removeEventListener("keypress",a),r&&e(6,i=!1);case 11:case"end":return n.stop()}}),n)})))},x=function(n){return l(void 0,void 0,void 0,I.mark((function t(){return I.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("computer"!==n){t.next=8;break}return e(5,s=!0),t.next=4,d(1e3);case 4:e(1,m=o.shift()),e(5,s=!1),t.next=13;break;case 8:return e(4,u=!0),t.next=11,d(1e3);case 11:e(0,h=r.shift()),e(4,u=!1);case 13:case"end":return t.stop()}}),t)})))},w=function(n){return l(void 0,void 0,void 0,I.mark((function t(){var u,s,p;return I.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(6,i=!0),u=n.category,t.next=4,x("player"===f?"computer":"player");case 4:return t.next=6,d(1e3);case 6:if(s=h[u],p=m[u],!(s>=p)){t.next=16;break}return r.push(m),r.push(h),e(7,f="player"),t.next=14,$({message:"YOU WIN!!",closeAfter:2e3});case 14:t.next=21;break;case 16:return o.push(m),o.push(h),e(7,f="computer"),t.next=21,$({message:"YOU LOSE!!",closeAfter:2e3});case 21:return e(2,a=r.length),e(3,c=o.length),t.next=25,l(void 0,void 0,void 0,I.mark((function n(){return I.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==a){n.next=6;break}return n.next=3,$({message:"You have no cards left — Dunstan the Fun Sponge has won the game!!",closeAfter:3e3});case 3:y(),n.next=10;break;case 6:if(0!==c){n.next=10;break}return n.next=9,$({message:"Dunstan the Fun Sponge has no cards left — you have won the game!!",closeAfter:3e3});case 9:y();case 10:case"end":return n.stop()}}),n)})));case 25:return t.abrupt("return",k());case 26:case"end":return t.stop()}}),t)})))},k=function(){return l(void 0,void 0,void 0,I.mark((function n(){var t;return I.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e(6,i=!0),!m&&!h){n.next=8;break}return e(5,s=!0),e(4,u=!0),n.next=6,d(1e3);case 6:e(5,s=!1),e(4,u=!1);case 8:return"computer"===f?e(0,h=null):e(1,m=null),n.next=11,x(f);case 11:return n.next=13,d(1e3);case 13:return n.next=15,$({message:"computer"===f?"It's Dunstan the Fun Sponges's turn…":"It's your turn. Pick a category…",closeAfter:2e3});case 15:if("player"!==f){n.next=19;break}e(6,i=!1),n.next=24;break;case 19:return t=["battleyness","scandal","subjectivity","longevity","dynasty"].sort((function(n,t){return m[n]>m[t]?-1:m[n]<m[t]?1:0}))[0],n.next=23,$({message:"Dunstan choses ".concat(t,"…"),closeAfter:1e3});case 23:w({player:"computer",category:t});case 24:case"end":return n.stop()}}),n)})))};y(),k();return n.$$set=function(n){"scores"in n&&e(9,p=n.scores)},[h,m,a,c,u,s,i,f,w,p,function(n){return w({player:"player",category:n.detail})}]}var en=function(t){n(s,u);var e=N(s);function s(n){var t;return r(this,s),t=e.call(this),o(c(t),n,tn,nn,a,{scores:9}),t}return s}();function rn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var o,a=t(n);if(r){var c=t(this).constructor;o=Reflect.construct(a,arguments,c)}else o=a.apply(this,arguments);return e(this,o)}}function on(n){var t,e,r,o,a;return e=new en({props:{scores:n[0]}}),{c:function(){t=s("div"),V(e.$$.fragment)},l:function(n){t=f(n,"DIV",{});var r=l(t);S(e.$$.fragment,r),r.forEach(v)},m:function(n,r){h(n,t,r),C(e,t,null),a=!0},p:function(n,t){var r={};1&t&&(r.scores=n[0]),e.$set(r)},i:function(n){a||(R(e.$$.fragment,n),P((function(){o&&o.end(1),r||(r=M(t,B,{delay:300,duration:200})),r.start()})),a=!0)},o:function(n){D(e.$$.fragment,n),r&&r.invalidate(),o=Y(t,B,{duration:200}),a=!1},d:function(n){n&&v(t),O(e),n&&o&&o.end()}}}function an(n){var t,e;return t=new _({props:{$$slots:{default:[on]},$$scope:{ctx:n}}}),{c:function(){V(t.$$.fragment)},l:function(n){S(t.$$.fragment,n)},m:function(n,r){C(t,n,r),e=!0},p:function(n,e){var r=g(e,1)[0],o={};3&r&&(o.$$scope={dirty:r,ctx:n}),t.$set(o)},i:function(n){e||(R(t.$$.fragment,n),e=!0)},o:function(n){D(t.$$.fragment,n),e=!1},d:function(n){O(t,n)}}}var cn=function(n,t,e,r){return new(e||(e=Promise))((function(o,a){function c(n){try{s(r.next(n))}catch(n){a(n)}}function u(n){try{s(r.throw(n))}catch(n){a(n)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(c,u)}s((r=r.apply(n,t||[])).next())}))};function un(){return cn(this,void 0,void 0,I.mark((function n(){var t,e;return I.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.fetch("data/monarchs.json");case 2:return t=n.sent,n.next=5,t.json();case 5:if(e=n.sent,200!==t.status){n.next=10;break}return n.abrupt("return",e);case 10:this.error(t.status,t.statusMessage);case 11:case"end":return n.stop()}}),n,this)})))}function sn(n,t,e){var r=t.scores;return n.$$set=function(n){"scores"in n&&e(0,r=n.scores)},[r]}var fn=function(t){n(s,u);var e=rn(s);function s(n){var t;return r(this,s),t=e.call(this),o(c(t),n,sn,an,a,{scores:0}),t}return s}();export default fn;export{un as preload};
