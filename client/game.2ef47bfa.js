import{S as e,i as t,s as a,e as n,x as o,b as r,g as s,y as l,d as i,j as c,l as u,k as d,B as f,n as h,a as m,f as p,Y as y,F as g,K as v,o as $,L as E,t as x,D,_ as w,c as _,h as I,m as A,u as O,O as b,r as P,q as C,v as N,p as T,a2 as R,a0 as S,$ as L,W as V,X as k,H as B}from"./client.f550ca45.js";import{s as F,a as j,f as M,B as q}from"./Banner.1a0d4983.js";import"./_common-styles.9c34c28b.js";import{C as U,M as Y}from"./Modal.71d4dcad.js";function H(e){let t,a,m;return{c(){t=n("div"),a=n("div"),m=o(e[0]),this.h()},l(n){t=r(n,"DIV",{class:!0});var o=s(t);a=r(o,"DIV",{});var c=s(a);m=l(c,e[0]),c.forEach(i),o.forEach(i),this.h()},h(){c(t,"class","popup svelte-1eosodn")},m(e,n){u(e,t,n),d(t,a),d(a,m)},p(e,[t]){1&t&&f(m,e[0])},i:h,o:h,d(e){e&&i(t)}}}function W(e,t,a){let{message:n}=t;return e.$$set=e=>{"message"in e&&a(0,n=e.message)},[n]}class G extends e{constructor(e){super(),t(this,e,W,H,a,{message:0})}}function z(e){let t,a,o,l;return a=new U({props:{rating:null}}),{c(){t=n("div"),_(a.$$.fragment)},l(e){t=r(e,"DIV",{});var n=s(t);I(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),A(a,t,null),l=!0},p:h,i(e){l||(x(a.$$.fragment,e),O((()=>{o||(o=b(t,j,{x:-500,y:50,duration:300},!0)),o.run(1)})),l=!0)},o(e){$(a.$$.fragment,e),o||(o=b(t,j,{x:-500,y:50,duration:300},!1)),o.run(0),l=!1},d(e){e&&i(t),P(a),e&&o&&o.end()}}}function K(e){let t,a,o,l;return a=new U({props:{rating:e[3],clickableCategories:!e[9]&&"player"===e[10]}}),a.$on("select",e[16]),{c(){t=n("div"),_(a.$$.fragment)},l(e){t=r(e,"DIV",{});var n=s(t);I(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),A(a,t,null),l=!0},p(e,t){const n={};8&t&&(n.rating=e[3]),1536&t&&(n.clickableCategories=!e[9]&&"player"===e[10]),a.$set(n)},i(e){l||(x(a.$$.fragment,e),O((()=>{o||(o=b(t,j,{x:-500,y:50,duration:300},!0)),o.run(1)})),l=!0)},o(e){$(a.$$.fragment,e),o||(o=b(t,j,{x:-500,y:50,duration:300},!1)),o.run(0),l=!1},d(e){e&&i(t),P(a),e&&o&&o.end()}}}function Q(e){let t;return{c(){t=n("div"),this.h()},l(e){t=r(e,"DIV",{class:!0}),s(t).forEach(i),this.h()},h(){c(t,"class","card-placeholder")},m(e,a){u(e,t,a)},p:h,i:h,o:h,d(e){e&&i(t)}}}function X(e){let t,a,o,l;return a=new U({props:{rating:null}}),{c(){t=n("div"),_(a.$$.fragment)},l(e){t=r(e,"DIV",{});var n=s(t);I(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),A(a,t,null),l=!0},p:h,i(e){l||(x(a.$$.fragment,e),O((()=>{o||(o=b(t,j,{x:500,y:-50,duration:600},!0)),o.run(1)})),l=!0)},o(e){$(a.$$.fragment,e),o||(o=b(t,j,{x:500,y:-50,duration:600},!1)),o.run(0),l=!1},d(e){e&&i(t),P(a),e&&o&&o.end()}}}function J(e){let t,a,o,l;return a=new U({props:{rating:e[4],clickableCategories:!1}}),{c(){t=n("div"),_(a.$$.fragment)},l(e){t=r(e,"DIV",{});var n=s(t);I(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),A(a,t,null),l=!0},p(e,t){const n={};16&t&&(n.rating=e[4]),a.$set(n)},i(e){l||(x(a.$$.fragment,e),O((()=>{o||(o=b(t,j,{x:500,y:-50,duration:600},!0)),o.run(1)})),l=!0)},o(e){$(a.$$.fragment,e),o||(o=b(t,j,{x:500,y:-50,duration:600},!1)),o.run(0),l=!1},d(e){e&&i(t),P(a),e&&o&&o.end()}}}function Z(e){let t;return{c(){t=n("div"),this.h()},l(e){t=r(e,"DIV",{class:!0}),s(t).forEach(i),this.h()},h(){c(t,"class","card-placeholder")},m(e,a){u(e,t,a)},p:h,i:h,o:h,d(e){e&&i(t)}}}function ee(e){let t,a,h,D,w,_,I,A,O,b,P,C,N,T,R,S,L,V,k,B,F,j,M;const q=[Q,K,z],U=[];function Y(e,t){return e[7]?0:e[3]?1:2}R=Y(e),S=U[R]=q[R](e);const H=[Z,J,X],W=[];function G(e,t){return e[8]?0:e[4]?1:2}return k=G(e),B=W[k]=H[k](e),{c(){t=n("button"),a=m(),h=n("game-board"),D=n("play-area"),w=n("div"),_=o(e[0]),I=m(),A=o(e[5]),O=m(),b=n("div"),P=o("Dunstan the Fun Sponge: "),C=o(e[6]),N=m(),T=n("card-area"),S.c(),L=m(),V=n("card-area"),B.c(),this.h()},l(n){t=r(n,"BUTTON",{class:!0}),s(t).forEach(i),a=p(n),h=r(n,"GAME-BOARD",{class:!0});var o=s(h);D=r(o,"PLAY-AREA",{class:!0});var c=s(D);w=r(c,"DIV",{class:!0});var u=s(w);_=l(u,e[0]),I=p(u),A=l(u,e[5]),u.forEach(i),O=p(c),b=r(c,"DIV",{class:!0});var d=s(b);P=l(d,"Dunstan the Fun Sponge: "),C=l(d,e[6]),d.forEach(i),N=p(c),T=r(c,"CARD-AREA",{});var f=s(T);S.l(f),f.forEach(i),L=p(c),V=r(c,"CARD-AREA",{});var m=s(V);B.l(m),m.forEach(i),c.forEach(i),o.forEach(i),this.h()},h(){c(t,"class","exit svelte-1qf4goo"),c(w,"class","score svelte-1qf4goo"),c(b,"class","score svelte-1qf4goo"),y(D,"class","svelte-1qf4goo"),y(h,"class","svelte-1qf4goo")},m(n,o){u(n,t,o),u(n,a,o),u(n,h,o),d(h,D),d(D,w),d(w,_),d(w,I),d(w,A),d(D,O),d(D,b),d(b,P),d(b,C),d(D,N),d(D,T),U[R].m(T,null),d(D,L),d(D,V),W[k].m(V,null),F=!0,j||(M=g(t,"click",e[15]),j=!0)},p(e,[t]){(!F||1&t)&&f(_,e[0]),(!F||32&t)&&f(A,e[5]),(!F||64&t)&&f(C,e[6]);let a=R;R=Y(e),R===a?U[R].p(e,t):(v(),$(U[a],1,1,(()=>{U[a]=null})),E(),S=U[R],S?S.p(e,t):(S=U[R]=q[R](e),S.c()),x(S,1),S.m(T,null));let n=k;k=G(e),k===n?W[k].p(e,t):(v(),$(W[n],1,1,(()=>{W[n]=null})),E(),B=W[k],B?B.p(e,t):(B=W[k]=H[k](e),B.c()),x(B,1),B.m(V,null))},i(e){F||(x(S),x(B),F=!0)},o(e){$(S),$(B),F=!1},d(e){e&&i(t),e&&i(a),e&&i(h),U[R].d(),W[k].d(),j=!1,M()}}}function te(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function s(e){try{i(n.next(e))}catch(e){r(e)}}function l(e){try{i(n.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,l)}i((n=n.apply(e,t||[])).next())}))};let{scores:o}=t,{playerName:r}=t,{difficulty:s="hard"}=t,l=!1;const i=D(),c=w("simple-modal"),u=e=>new Promise((t=>setTimeout(t,e)));let d,f,h,m,p,y,g,v,$=null,E=null;const x={styleBg:{background:"none",top:"1em",left:0},styleWindow:{background:"rgba(0,0,0,0.8)",width:"fit-content"},styleContent:{},transitionWindow:F,styleCloseButton:{display:"none",cursor:"pointer",borderRadius:"30%",boxShadow:"0 0 0 1px #00000033"}},_=()=>{const e=(e=>{const t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t})(o);d=e.splice(e.length/2),f=e,a(5,h=d.length),a(6,m=f.length),a(10,v="player"),a(7,p=!1),a(8,y=!1),a(9,g=!1)},I=({message:e,closeAfter:t=1e3})=>n(void 0,void 0,void 0,(function*(){if(l)return;const o=!g;a(9,g=!0);const r=()=>{c.close()};"undefined"!=typeof document&&document.addEventListener("keypress",r);const s=new Promise((t=>{a(2,c.isOpen=!0,c),c.open(G,{message:e},x,{onClose:()=>n(void 0,void 0,void 0,(function*(){a(2,c.isOpen=!1,c),t()}))})}));yield Promise.race([s,u(t)]),c.isClosed||c.close(),a(2,c.isOpen=!1,c),"undefined"!=typeof document&&document.removeEventListener("keypress",r),o&&a(9,g=!1)})),A=e=>n(void 0,void 0,void 0,(function*(){"computer"===e?(a(8,y=!0),yield u(1e3),a(4,E=f.shift()),a(8,y=!1)):(a(7,p=!0),yield u(1e3),a(3,$=d.shift()),a(7,p=!1))})),O=e=>n(void 0,void 0,void 0,(function*(){a(9,g=!0);const t=e.category;yield A("player"===v?"computer":"player"),yield u(1e3);return $[t]>=E[t]?(d.push(E),d.push($),a(10,v="player"),yield I({message:"YOU WIN!!",closeAfter:3e3})):(f.push(E),f.push($),a(10,v="computer"),yield I({message:"YOU LOSE!!",closeAfter:3e3})),a(5,h=d.length),a(6,m=f.length),yield n(void 0,void 0,void 0,(function*(){0===h?(yield I({message:"You have no cards left — Dunstan the Fun Sponge has won the game!!",closeAfter:3e3}),_()):0===m&&(yield I({message:"Dunstan the Fun Sponge has no cards left — you have won the game!!",closeAfter:3e3}),_())})),b()})),b=()=>n(void 0,void 0,void 0,(function*(){if(a(9,g=!0),(E||$)&&(a(8,y=!0),a(7,p=!0),yield u(1e3),a(8,y=!1),a(7,p=!1)),"computer"===v?a(3,$=null):a(4,E=null),yield A(v),yield u(1e3),yield I({message:"computer"===v?"It's Dunstan the Fun Sponges's turn…":"It's your turn. Pick a category…",closeAfter:2e3}),"player"===v)a(9,g=!1);else{const e=(()=>{const e=["battleyness","scandal","subjectivity","longevity","dynasty"];if("hard"===s)return e.sort(((e,t)=>E[e]>E[t]?-1:E[e]<E[t]?1:0))[0];if("easy"===s)return e[Math.floor(Math.random()*(e.length-1))]})();yield I({message:`Dunstan choses ${e}…`,closeAfter:1e3}),O({player:"computer",category:e})}}));_(),b();return e.$$set=e=>{"scores"in e&&a(13,o=e.scores),"playerName"in e&&a(0,r=e.playerName),"difficulty"in e&&a(14,s=e.difficulty)},[r,l,c,$,E,h,m,p,y,g,v,i,O,o,s,()=>{c.close(),a(1,l=!0),i("close")},e=>O({player:"player",category:e.detail})]}class ae extends e{constructor(e){super(),t(this,e,te,ee,a,{scores:13,playerName:0,difficulty:14})}}function ne(e){let t,a,o,l,c;return a=new ae({props:{scores:e[0],playerName:e[3],difficulty:e[2]}}),a.$on("close",e[8]),{c(){t=n("div"),_(a.$$.fragment)},l(e){t=r(e,"DIV",{});var n=s(t);I(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),A(a,t,null),c=!0},p(e,t){const n={};1&t&&(n.scores=e[0]),8&t&&(n.playerName=e[3]),4&t&&(n.difficulty=e[2]),a.$set(n)},i(e){c||(x(a.$$.fragment,e),O((()=>{l&&l.end(1),o||(o=N(t,M,{delay:300,duration:200})),o.start()})),c=!0)},o(e){$(a.$$.fragment,e),o&&o.invalidate(),l=T(t,M,{duration:200}),c=!1},d(e){e&&i(t),P(a),e&&l&&l.end()}}}function oe(e){let t,a,f,h,y,v,E,D,w,b,C,R,F,j,U,Y,H,W,G,z,K,Q,X,J,Z,ee,te,ae,ne,oe,re,se,le,ie,ce,ue,de,fe,he,me,pe,ye;return a=new q({props:{title:"Rexplorer the Game",imagePath:"king-and-queen-playing-chess.jpg",imageAlt:"King and Queen playing chess"}}),{c(){t=n("div"),_(a.$$.fragment),f=m(),h=n("p"),y=o("In the Rexplorer game you will pit your wits against Dunstan the Fun\n          Sponge!"),v=m(),E=n("p"),D=o("Choose your name and card category to play the game."),w=m(),b=n("form"),C=n("label"),R=o("Player name"),F=m(),j=n("input"),U=m(),Y=n("label"),H=o("Card category"),W=m(),G=n("select"),z=n("option"),K=o("English monarchs"),Q=n("option"),X=o("English consorts"),J=n("option"),Z=o("English royal teams"),ee=m(),te=n("label"),ae=o("Difficulty"),ne=m(),oe=n("select"),re=n("option"),se=o("Easy"),le=n("option"),ie=o("Hard"),ce=m(),ue=n("button"),de=o("Play the game!"),this.h()},l(e){t=r(e,"DIV",{});var n=s(t);I(a.$$.fragment,n),f=p(n),h=r(n,"P",{});var o=s(h);y=l(o,"In the Rexplorer game you will pit your wits against Dunstan the Fun\n          Sponge!"),o.forEach(i),v=p(n),E=r(n,"P",{});var c=s(E);D=l(c,"Choose your name and card category to play the game."),c.forEach(i),w=p(n),b=r(n,"FORM",{class:!0});var u=s(b);C=r(u,"LABEL",{for:!0});var d=s(C);R=l(d,"Player name"),d.forEach(i),F=p(u),j=r(u,"INPUT",{type:!0}),U=p(u),Y=r(u,"LABEL",{for:!0});var m=s(Y);H=l(m,"Card category"),m.forEach(i),W=p(u),G=r(u,"SELECT",{id:!0});var g=s(G);z=r(g,"OPTION",{value:!0});var $=s(z);K=l($,"English monarchs"),$.forEach(i),Q=r(g,"OPTION",{value:!0});var x=s(Q);X=l(x,"English consorts"),x.forEach(i),J=r(g,"OPTION",{value:!0});var _=s(J);Z=l(_,"English royal teams"),_.forEach(i),g.forEach(i),ee=p(u),te=r(u,"LABEL",{for:!0});var A=s(te);ae=l(A,"Difficulty"),A.forEach(i),ne=p(u),oe=r(u,"SELECT",{id:!0});var O=s(oe);re=r(O,"OPTION",{value:!0});var P=s(re);se=l(P,"Easy"),P.forEach(i),le=r(O,"OPTION",{value:!0});var N=s(le);ie=l(N,"Hard"),N.forEach(i),O.forEach(i),ce=p(u),ue=r(u,"BUTTON",{type:!0});var T=s(ue);de=l(T,"Play the game!"),T.forEach(i),u.forEach(i),n.forEach(i),this.h()},h(){c(C,"for","name"),c(j,"type","text"),c(Y,"for","rating-type"),z.__value="monarchs",z.value=z.__value,Q.__value="consorts",Q.value=Q.__value,J.__value="teams",J.value=J.__value,c(G,"id","rating-type"),void 0===e[1]&&O((()=>e[6].call(G))),c(te,"for","difficulty"),re.__value="easy",re.value=re.__value,le.__value="hard",le.value=le.__value,c(oe,"id","difficulty"),void 0===e[2]&&O((()=>e[7].call(oe))),c(ue,"type","sumbit"),c(b,"class","svelte-1jlkzna")},m(n,o){u(n,t,o),A(a,t,null),d(t,f),d(t,h),d(h,y),d(t,v),d(t,E),d(E,D),d(t,w),d(t,b),d(b,C),d(C,R),d(b,F),d(b,j),S(j,e[3]),d(b,U),d(b,Y),d(Y,H),d(b,W),d(b,G),d(G,z),d(z,K),d(G,Q),d(Q,X),d(G,J),d(J,Z),L(G,e[1]),d(b,ee),d(b,te),d(te,ae),d(b,ne),d(b,oe),d(oe,re),d(re,se),d(oe,le),d(le,ie),L(oe,e[2]),d(b,ce),d(b,ue),d(ue,de),me=!0,pe||(ye=[g(j,"input",e[5]),g(G,"change",e[6]),g(oe,"change",e[7]),g(b,"submit",V(k(e[4])))],pe=!0)},p(e,t){8&t&&j.value!==e[3]&&S(j,e[3]),2&t&&L(G,e[1]),4&t&&L(oe,e[2])},i(e){me||(x(a.$$.fragment,e),O((()=>{he&&he.end(1),fe||(fe=N(t,M,{delay:300,duration:200})),fe.start()})),me=!0)},o(e){$(a.$$.fragment,e),fe&&fe.invalidate(),he=T(t,M,{duration:200}),me=!1},d(e){e&&i(t),P(a),e&&he&&he.end(),pe=!1,B(ye)}}}function re(e){let t,a,o,l,c,d;const f=[oe,ne],h=[];function m(e,t){return 0===e[0].length?0:1}return a=m(e),o=h[a]=f[a](e),{c(){t=n("div"),o.c()},l(e){t=r(e,"DIV",{});var a=s(t);o.l(a),a.forEach(i)},m(e,n){u(e,t,n),h[a].m(t,null),d=!0},p(e,n){let r=a;a=m(e),a===r?h[a].p(e,n):(v(),$(h[r],1,1,(()=>{h[r]=null})),E(),o=h[a],o?o.p(e,n):(o=h[a]=f[a](e),o.c()),x(o,1),o.m(t,null))},i(e){d||(x(o),O((()=>{c&&c.end(1),l||(l=N(t,M,{delay:300,duration:200})),l.start()})),d=!0)},o(e){$(o),l&&l.invalidate(),c=T(t,M,{duration:200}),d=!1},d(e){e&&i(t),h[a].d(),e&&c&&c.end()}}}function se(e){let t,a,o,s;return o=new Y({props:{$$slots:{default:[re]},$$scope:{ctx:e}}}),{c(){t=n("meta"),a=m(),_(o.$$.fragment),this.h()},l(e){const n=C('[data-svelte="svelte-zc3qf3"]',document.head);t=r(n,"META",{name:!0,content:!0}),n.forEach(i),a=p(e),I(o.$$.fragment,e),this.h()},h(){document.title="Rexplorer game",c(t,"name","Description"),c(t,"content","A card game based on the ratings from the Rex Factor podcast")},m(e,n){d(document.head,t),u(e,a,n),A(o,e,n),s=!0},p(e,[t]){const a={};1039&t&&(a.$$scope={dirty:t,ctx:e}),o.$set(a)},i(e){s||(x(o.$$.fragment,e),s=!0)},o(e){$(o.$$.fragment,e),s=!1},d(e){i(t),e&&i(a),P(o,e)}}}function le(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function s(e){try{i(n.next(e))}catch(e){r(e)}}function l(e){try{i(n.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,l)}i((n=n.apply(e,t||[])).next())}))};let o=[],r="monarchs",s="easy",l="Player";return[o,r,s,l,()=>n(void 0,void 0,void 0,(function*(){console.log("FETCHING SCORES....");const e=yield fetch(`data/${r}.json`),t=yield e.json();200===e.status?a(0,o=t.scores):this.error(e.status,e.statusText)})),function(){l=this.value,a(3,l)},function(){r=R(this),a(1,r)},function(){s=R(this),a(2,s)},()=>a(0,o=[])]}export default class extends e{constructor(e){super(),t(this,e,le,se,a,{})}}
