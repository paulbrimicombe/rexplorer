import{S as e,i as t,s as a,e as n,x as r,b as o,g as s,y as l,d as i,j as c,l as u,k as d,B as f,n as h,a as m,f as p,Y as v,K as y,o as g,L as $,t as E,_ as x,c as w,h as D,m as _,u as I,O as A,r as b,q as k,v as O,p as P,a2 as C,a0 as j,$ as N,F as R,W as S,X as T,H as L}from"./client.6cc7019b.js";import{s as V,a as F,f as B,B as M}from"./Banner.342f2c86.js";import"./_common-styles.9c34c28b.js";import{C as Y,M as H}from"./Modal.db9e5b8d.js";function U(e){let t,a,m;return{c(){t=n("div"),a=n("div"),m=r(e[0]),this.h()},l(n){t=o(n,"DIV",{class:!0});var r=s(t);a=o(r,"DIV",{});var c=s(a);m=l(c,e[0]),c.forEach(i),r.forEach(i),this.h()},h(){c(t,"class","popup svelte-1eosodn")},m(e,n){u(e,t,n),d(t,a),d(a,m)},p(e,[t]){1&t&&f(m,e[0])},i:h,o:h,d(e){e&&i(t)}}}function W(e,t,a){let{message:n}=t;return e.$$set=e=>{"message"in e&&a(0,n=e.message)},[n]}class q extends e{constructor(e){super(),t(this,e,W,U,a,{message:0})}}function G(e){let t,a,r,l;return a=new Y({props:{rating:null}}),{c(){t=n("div"),w(a.$$.fragment)},l(e){t=o(e,"DIV",{});var n=s(t);D(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),_(a,t,null),l=!0},p:h,i(e){l||(E(a.$$.fragment,e),I((()=>{r||(r=A(t,F,{x:-500,y:50,duration:300},!0)),r.run(1)})),l=!0)},o(e){g(a.$$.fragment,e),r||(r=A(t,F,{x:-500,y:50,duration:300},!1)),r.run(0),l=!1},d(e){e&&i(t),b(a),e&&r&&r.end()}}}function z(e){let t,a,r,l;return a=new Y({props:{rating:e[1],clickableCategories:!e[7]&&"player"===e[8]}}),a.$on("select",e[12]),{c(){t=n("div"),w(a.$$.fragment)},l(e){t=o(e,"DIV",{});var n=s(t);D(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),_(a,t,null),l=!0},p(e,t){const n={};2&t&&(n.rating=e[1]),384&t&&(n.clickableCategories=!e[7]&&"player"===e[8]),a.$set(n)},i(e){l||(E(a.$$.fragment,e),I((()=>{r||(r=A(t,F,{x:-500,y:50,duration:300},!0)),r.run(1)})),l=!0)},o(e){g(a.$$.fragment,e),r||(r=A(t,F,{x:-500,y:50,duration:300},!1)),r.run(0),l=!1},d(e){e&&i(t),b(a),e&&r&&r.end()}}}function K(e){let t;return{c(){t=n("div")},l(e){t=o(e,"DIV",{}),s(t).forEach(i)},m(e,a){u(e,t,a)},p:h,i:h,o:h,d(e){e&&i(t)}}}function Q(e){let t,a,r,l;return a=new Y({props:{rating:null}}),{c(){t=n("div"),w(a.$$.fragment)},l(e){t=o(e,"DIV",{});var n=s(t);D(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),_(a,t,null),l=!0},p:h,i(e){l||(E(a.$$.fragment,e),I((()=>{r||(r=A(t,F,{x:500,y:-50,duration:600},!0)),r.run(1)})),l=!0)},o(e){g(a.$$.fragment,e),r||(r=A(t,F,{x:500,y:-50,duration:600},!1)),r.run(0),l=!1},d(e){e&&i(t),b(a),e&&r&&r.end()}}}function X(e){let t,a,r,l;return a=new Y({props:{rating:e[2],clickableCategories:!1}}),{c(){t=n("div"),w(a.$$.fragment)},l(e){t=o(e,"DIV",{});var n=s(t);D(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),_(a,t,null),l=!0},p(e,t){const n={};4&t&&(n.rating=e[2]),a.$set(n)},i(e){l||(E(a.$$.fragment,e),I((()=>{r||(r=A(t,F,{x:500,y:-50,duration:600},!0)),r.run(1)})),l=!0)},o(e){g(a.$$.fragment,e),r||(r=A(t,F,{x:500,y:-50,duration:600},!1)),r.run(0),l=!1},d(e){e&&i(t),b(a),e&&r&&r.end()}}}function J(e){let t;return{c(){t=n("div")},l(e){t=o(e,"DIV",{}),s(t).forEach(i)},m(e,a){u(e,t,a)},p:h,i:h,o:h,d(e){e&&i(t)}}}function Z(e){let t,a,h,x,w,D,_,I,A,b,k,O,P,C,j,N,R,S,T;const L=[K,z,G],V=[];function F(e,t){return e[5]?0:e[1]?1:2}P=F(e),C=V[P]=L[P](e);const B=[J,X,Q],M=[];function Y(e,t){return e[6]?0:e[2]?1:2}return R=Y(e),S=M[R]=B[R](e),{c(){t=n("game-board"),a=n("play-area"),h=n("div"),x=r(e[0]),w=m(),D=r(e[3]),_=m(),I=n("div"),A=r("Dunstan the Fun Sponge: "),b=r(e[4]),k=m(),O=n("card-area"),C.c(),j=m(),N=n("card-area"),S.c(),this.h()},l(n){t=o(n,"GAME-BOARD",{class:!0});var r=s(t);a=o(r,"PLAY-AREA",{class:!0});var c=s(a);h=o(c,"DIV",{class:!0});var u=s(h);x=l(u,e[0]),w=p(u),D=l(u,e[3]),u.forEach(i),_=p(c),I=o(c,"DIV",{class:!0});var d=s(I);A=l(d,"Dunstan the Fun Sponge: "),b=l(d,e[4]),d.forEach(i),k=p(c),O=o(c,"CARD-AREA",{class:!0});var f=s(O);C.l(f),f.forEach(i),j=p(c),N=o(c,"CARD-AREA",{class:!0});var m=s(N);S.l(m),m.forEach(i),c.forEach(i),r.forEach(i),this.h()},h(){c(h,"class","score svelte-10kk1oj"),c(I,"class","score svelte-10kk1oj"),v(O,"class","svelte-10kk1oj"),v(N,"class","svelte-10kk1oj"),v(a,"class","svelte-10kk1oj"),v(t,"class","svelte-10kk1oj")},m(e,n){u(e,t,n),d(t,a),d(a,h),d(h,x),d(h,w),d(h,D),d(a,_),d(a,I),d(I,A),d(I,b),d(a,k),d(a,O),V[P].m(O,null),d(a,j),d(a,N),M[R].m(N,null),T=!0},p(e,[t]){(!T||1&t)&&f(x,e[0]),(!T||8&t)&&f(D,e[3]),(!T||16&t)&&f(b,e[4]);let a=P;P=F(e),P===a?V[P].p(e,t):(y(),g(V[a],1,1,(()=>{V[a]=null})),$(),C=V[P],C?C.p(e,t):(C=V[P]=L[P](e),C.c()),E(C,1),C.m(O,null));let n=R;R=Y(e),R===n?M[R].p(e,t):(y(),g(M[n],1,1,(()=>{M[n]=null})),$(),S=M[R],S?S.p(e,t):(S=M[R]=B[R](e),S.c()),E(S,1),S.m(N,null))},i(e){T||(E(C),E(S),T=!0)},o(e){g(C),g(S),T=!1},d(e){e&&i(t),V[P].d(),M[R].d()}}}function ee(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{i(n.next(e))}catch(e){o(e)}}function l(e){try{i(n.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,l)}i((n=n.apply(e,t||[])).next())}))};let{scores:r}=t,{playerName:o}=t,{difficulty:s="hard"}=t;const l=x("simple-modal"),i=e=>new Promise((t=>setTimeout(t,e)));let c,u,d,f,h,m,p,v,y=null,g=null;const $={styleBg:{background:"none",top:"1em",left:0},styleWindow:{background:"rgba(0,0,0,0.8)",width:"fit-content"},styleContent:{},transitionWindow:V,styleCloseButton:{display:"none",cursor:"pointer",borderRadius:"30%",boxShadow:"0 0 0 1px #00000033"}},E=()=>{const e=(e=>{const t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t})(r);c=e.splice(e.length/2),u=e,a(3,d=c.length),a(4,f=u.length),a(8,v="player"),a(5,h=!1),a(6,m=!1),a(7,p=!1)},w=({message:e,closeAfter:t=1e3})=>n(void 0,void 0,void 0,(function*(){const r=!p;a(7,p=!0);const o=()=>{l.close()};"undefined"!=typeof document&&document.addEventListener("keypress",o);const s=new Promise((t=>{l.isOpen=!0,l.open(q,{message:e},$,{onClose:()=>n(void 0,void 0,void 0,(function*(){l.isOpen=!1,t()}))})}));yield Promise.race([s,i(t)]),l.isClosed||l.close(),l.isOpen=!1,"undefined"!=typeof document&&document.removeEventListener("keypress",o),r&&a(7,p=!1)})),D=e=>n(void 0,void 0,void 0,(function*(){"computer"===e?(a(6,m=!0),yield i(1e3),a(2,g=u.shift()),a(6,m=!1)):(a(5,h=!0),yield i(1e3),a(1,y=c.shift()),a(5,h=!1))})),_=e=>n(void 0,void 0,void 0,(function*(){a(7,p=!0);const t=e.category;yield D("player"===v?"computer":"player"),yield i(1e3);return y[t]>=g[t]?(c.push(g),c.push(y),a(8,v="player"),yield w({message:"YOU WIN!!",closeAfter:3e3})):(u.push(g),u.push(y),a(8,v="computer"),yield w({message:"YOU LOSE!!",closeAfter:3e3})),a(3,d=c.length),a(4,f=u.length),yield n(void 0,void 0,void 0,(function*(){0===d?(yield w({message:"You have no cards left — Dunstan the Fun Sponge has won the game!!",closeAfter:3e3}),E()):0===f&&(yield w({message:"Dunstan the Fun Sponge has no cards left — you have won the game!!",closeAfter:3e3}),E())})),I()})),I=()=>n(void 0,void 0,void 0,(function*(){if(a(7,p=!0),(g||y)&&(a(6,m=!0),a(5,h=!0),yield i(1e3),a(6,m=!1),a(5,h=!1)),"computer"===v?a(1,y=null):a(2,g=null),yield D(v),yield i(1e3),yield w({message:"computer"===v?"It's Dunstan the Fun Sponges's turn…":"It's your turn. Pick a category…",closeAfter:2e3}),"player"===v)a(7,p=!1);else{const e=(()=>{const e=["battleyness","scandal","subjectivity","longevity","dynasty"];if("hard"===s)return e.sort(((e,t)=>g[e]>g[t]?-1:g[e]<g[t]?1:0))[0];if("easy"===s)return e[Math.floor(Math.random()*(e.length-1))]})();yield w({message:`Dunstan choses ${e}…`,closeAfter:1e3}),_({player:"computer",category:e})}}));E(),I();return e.$$set=e=>{"scores"in e&&a(10,r=e.scores),"playerName"in e&&a(0,o=e.playerName),"difficulty"in e&&a(11,s=e.difficulty)},[o,y,g,d,f,h,m,p,v,_,r,s,e=>_({player:"player",category:e.detail})]}class te extends e{constructor(e){super(),t(this,e,ee,Z,a,{scores:10,playerName:0,difficulty:11})}}function ae(e){let t,a,r,l,c;return a=new te({props:{scores:e[0],playerName:e[3],difficulty:e[2]}}),{c(){t=n("div"),w(a.$$.fragment)},l(e){t=o(e,"DIV",{});var n=s(t);D(a.$$.fragment,n),n.forEach(i)},m(e,n){u(e,t,n),_(a,t,null),c=!0},p(e,t){const n={};1&t&&(n.scores=e[0]),8&t&&(n.playerName=e[3]),4&t&&(n.difficulty=e[2]),a.$set(n)},i(e){c||(E(a.$$.fragment,e),I((()=>{l&&l.end(1),r||(r=O(t,B,{delay:300,duration:200})),r.start()})),c=!0)},o(e){g(a.$$.fragment,e),r&&r.invalidate(),l=P(t,B,{duration:200}),c=!1},d(e){e&&i(t),b(a),e&&l&&l.end()}}}function ne(e){let t,a,f,h,v,y,$,x,A,k,C,V,F,Y,H,U,W,q,G,z,K,Q,X,J,Z,ee,te,ae,ne,re,oe,se,le,ie,ce,ue,de,fe,he,me,pe,ve;return a=new M({props:{title:"Rexplorer the Game",imagePath:"king-and-queen-playing-chess.jpg",imageAlt:"King and Queen playing chess"}}),{c(){t=n("div"),w(a.$$.fragment),f=m(),h=n("p"),v=r("In the Rexplorer game you will pit your wits against Dunstan the Fun\n          Sponge!"),y=m(),$=n("p"),x=r("Choose your name and card category to play the game."),A=m(),k=n("form"),C=n("label"),V=r("Player name"),F=m(),Y=n("input"),H=m(),U=n("label"),W=r("Card category"),q=m(),G=n("select"),z=n("option"),K=r("English monarchs"),Q=n("option"),X=r("English consorts"),J=n("option"),Z=r("English royal teams"),ee=m(),te=n("label"),ae=r("Difficulty"),ne=m(),re=n("select"),oe=n("option"),se=r("Easy"),le=n("option"),ie=r("Hard"),ce=m(),ue=n("button"),de=r("Play the game!"),this.h()},l(e){t=o(e,"DIV",{});var n=s(t);D(a.$$.fragment,n),f=p(n),h=o(n,"P",{});var r=s(h);v=l(r,"In the Rexplorer game you will pit your wits against Dunstan the Fun\n          Sponge!"),r.forEach(i),y=p(n),$=o(n,"P",{});var c=s($);x=l(c,"Choose your name and card category to play the game."),c.forEach(i),A=p(n),k=o(n,"FORM",{class:!0});var u=s(k);C=o(u,"LABEL",{for:!0});var d=s(C);V=l(d,"Player name"),d.forEach(i),F=p(u),Y=o(u,"INPUT",{type:!0}),H=p(u),U=o(u,"LABEL",{for:!0});var m=s(U);W=l(m,"Card category"),m.forEach(i),q=p(u),G=o(u,"SELECT",{id:!0});var g=s(G);z=o(g,"OPTION",{value:!0});var E=s(z);K=l(E,"English monarchs"),E.forEach(i),Q=o(g,"OPTION",{value:!0});var w=s(Q);X=l(w,"English consorts"),w.forEach(i),J=o(g,"OPTION",{value:!0});var _=s(J);Z=l(_,"English royal teams"),_.forEach(i),g.forEach(i),ee=p(u),te=o(u,"LABEL",{for:!0});var I=s(te);ae=l(I,"Difficulty"),I.forEach(i),ne=p(u),re=o(u,"SELECT",{id:!0});var b=s(re);oe=o(b,"OPTION",{value:!0});var O=s(oe);se=l(O,"Easy"),O.forEach(i),le=o(b,"OPTION",{value:!0});var P=s(le);ie=l(P,"Hard"),P.forEach(i),b.forEach(i),ce=p(u),ue=o(u,"BUTTON",{type:!0});var j=s(ue);de=l(j,"Play the game!"),j.forEach(i),u.forEach(i),n.forEach(i),this.h()},h(){c(C,"for","name"),c(Y,"type","text"),c(U,"for","rating-type"),z.__value="monarchs",z.value=z.__value,Q.__value="consorts",Q.value=Q.__value,J.__value="teams",J.value=J.__value,c(G,"id","rating-type"),void 0===e[1]&&I((()=>e[6].call(G))),c(te,"for","difficulty"),oe.__value="easy",oe.value=oe.__value,le.__value="hard",le.value=le.__value,c(re,"id","difficulty"),void 0===e[2]&&I((()=>e[7].call(re))),c(ue,"type","sumbit"),c(k,"class","svelte-1jlkzna")},m(n,r){u(n,t,r),_(a,t,null),d(t,f),d(t,h),d(h,v),d(t,y),d(t,$),d($,x),d(t,A),d(t,k),d(k,C),d(C,V),d(k,F),d(k,Y),j(Y,e[3]),d(k,H),d(k,U),d(U,W),d(k,q),d(k,G),d(G,z),d(z,K),d(G,Q),d(Q,X),d(G,J),d(J,Z),N(G,e[1]),d(k,ee),d(k,te),d(te,ae),d(k,ne),d(k,re),d(re,oe),d(oe,se),d(re,le),d(le,ie),N(re,e[2]),d(k,ce),d(k,ue),d(ue,de),me=!0,pe||(ve=[R(Y,"input",e[5]),R(G,"change",e[6]),R(re,"change",e[7]),R(k,"submit",S(T(e[4])))],pe=!0)},p(e,t){8&t&&Y.value!==e[3]&&j(Y,e[3]),2&t&&N(G,e[1]),4&t&&N(re,e[2])},i(e){me||(E(a.$$.fragment,e),I((()=>{he&&he.end(1),fe||(fe=O(t,B,{delay:300,duration:200})),fe.start()})),me=!0)},o(e){g(a.$$.fragment,e),fe&&fe.invalidate(),he=P(t,B,{duration:200}),me=!1},d(e){e&&i(t),b(a),e&&he&&he.end(),pe=!1,L(ve)}}}function re(e){let t,a,r,l,c,d;const f=[ne,ae],h=[];function m(e,t){return 0===e[0].length?0:1}return a=m(e),r=h[a]=f[a](e),{c(){t=n("div"),r.c()},l(e){t=o(e,"DIV",{});var a=s(t);r.l(a),a.forEach(i)},m(e,n){u(e,t,n),h[a].m(t,null),d=!0},p(e,n){let o=a;a=m(e),a===o?h[a].p(e,n):(y(),g(h[o],1,1,(()=>{h[o]=null})),$(),r=h[a],r?r.p(e,n):(r=h[a]=f[a](e),r.c()),E(r,1),r.m(t,null))},i(e){d||(E(r),I((()=>{c&&c.end(1),l||(l=O(t,B,{delay:300,duration:200})),l.start()})),d=!0)},o(e){g(r),l&&l.invalidate(),c=P(t,B,{duration:200}),d=!1},d(e){e&&i(t),h[a].d(),e&&c&&c.end()}}}function oe(e){let t,a,r,s;return r=new H({props:{$$slots:{default:[re]},$$scope:{ctx:e}}}),{c(){t=n("meta"),a=m(),w(r.$$.fragment),this.h()},l(e){const n=k('[data-svelte="svelte-zc3qf3"]',document.head);t=o(n,"META",{name:!0,content:!0}),n.forEach(i),a=p(e),D(r.$$.fragment,e),this.h()},h(){document.title="Rexplorer game",c(t,"name","Description"),c(t,"content","A card game based on the ratings from the Rex Factor podcast")},m(e,n){d(document.head,t),u(e,a,n),_(r,e,n),s=!0},p(e,[t]){const a={};527&t&&(a.$$scope={dirty:t,ctx:e}),r.$set(a)},i(e){s||(E(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){i(t),e&&i(a),b(r,e)}}}function se(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{i(n.next(e))}catch(e){o(e)}}function l(e){try{i(n.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,l)}i((n=n.apply(e,t||[])).next())}))};let r=[],o="monarchs",s="easy",l="Player";return[r,o,s,l,()=>n(void 0,void 0,void 0,(function*(){console.log("FETCHING SCORES....");const e=yield fetch(`data/${o}.json`),t=yield e.json();200===e.status?a(0,r=t.scores):this.error(e.status,e.statusText)})),function(){l=this.value,a(3,l)},function(){o=C(this),a(1,o)},function(){s=C(this),a(2,s)}]}export default class extends e{constructor(e){super(),t(this,e,se,oe,a,{})}}
