import{S as e,i as t,s as n,e as a,x as r,b as o,g as s,y as l,d as i,j as c,l as u,k as d,B as f,n as m,a as p,f as h,Y as g,K as y,o as v,L as $,t as E,_ as w,c as x,h as D,m as I,u as b,O as A,r as P,v as _,p as C,a2 as O,a0 as N,$ as S,F as V,W as R,X as k,H as j}from"./client.6b952357.js";import{s as F,a as L,f as T,B}from"./Banner.bf9b5b88.js";import"./_common-styles.9c34c28b.js";import{C as M,M as q}from"./Modal.a796229f.js";function Y(e){let t,n,p;return{c(){t=a("div"),n=a("div"),p=r(e[0]),this.h()},l(a){t=o(a,"DIV",{class:!0});var r=s(t);n=o(r,"DIV",{});var c=s(n);p=l(c,e[0]),c.forEach(i),r.forEach(i),this.h()},h(){c(t,"class","popup svelte-1eosodn")},m(e,a){u(e,t,a),d(t,n),d(n,p)},p(e,[t]){1&t&&f(p,e[0])},i:m,o:m,d(e){e&&i(t)}}}function U(e,t,n){let{message:a}=t;return e.$$set=e=>{"message"in e&&n(0,a=e.message)},[a]}class W extends e{constructor(e){super(),t(this,e,U,Y,n,{message:0})}}function G(e){let t,n,r,l;return n=new M({props:{rating:null}}),{c(){t=a("div"),x(n.$$.fragment)},l(e){t=o(e,"DIV",{});var a=s(t);D(n.$$.fragment,a),a.forEach(i)},m(e,a){u(e,t,a),I(n,t,null),l=!0},p:m,i(e){l||(E(n.$$.fragment,e),b((()=>{r||(r=A(t,L,{x:-500,y:50,duration:300},!0)),r.run(1)})),l=!0)},o(e){v(n.$$.fragment,e),r||(r=A(t,L,{x:-500,y:50,duration:300},!1)),r.run(0),l=!1},d(e){e&&i(t),P(n),e&&r&&r.end()}}}function H(e){let t,n,r,l;return n=new M({props:{rating:e[1],clickableCategories:!e[7]&&"player"===e[8]}}),n.$on("select",e[11]),{c(){t=a("div"),x(n.$$.fragment)},l(e){t=o(e,"DIV",{});var a=s(t);D(n.$$.fragment,a),a.forEach(i)},m(e,a){u(e,t,a),I(n,t,null),l=!0},p(e,t){const a={};2&t&&(a.rating=e[1]),384&t&&(a.clickableCategories=!e[7]&&"player"===e[8]),n.$set(a)},i(e){l||(E(n.$$.fragment,e),b((()=>{r||(r=A(t,L,{x:-500,y:50,duration:300},!0)),r.run(1)})),l=!0)},o(e){v(n.$$.fragment,e),r||(r=A(t,L,{x:-500,y:50,duration:300},!1)),r.run(0),l=!1},d(e){e&&i(t),P(n),e&&r&&r.end()}}}function K(e){let t;return{c(){t=a("div")},l(e){t=o(e,"DIV",{}),s(t).forEach(i)},m(e,n){u(e,t,n)},p:m,i:m,o:m,d(e){e&&i(t)}}}function z(e){let t,n,r,l;return n=new M({props:{rating:null}}),{c(){t=a("div"),x(n.$$.fragment)},l(e){t=o(e,"DIV",{});var a=s(t);D(n.$$.fragment,a),a.forEach(i)},m(e,a){u(e,t,a),I(n,t,null),l=!0},p:m,i(e){l||(E(n.$$.fragment,e),b((()=>{r||(r=A(t,L,{x:500,y:-50,duration:600},!0)),r.run(1)})),l=!0)},o(e){v(n.$$.fragment,e),r||(r=A(t,L,{x:500,y:-50,duration:600},!1)),r.run(0),l=!1},d(e){e&&i(t),P(n),e&&r&&r.end()}}}function Q(e){let t,n,r,l;return n=new M({props:{rating:e[2],clickableCategories:!1}}),{c(){t=a("div"),x(n.$$.fragment)},l(e){t=o(e,"DIV",{});var a=s(t);D(n.$$.fragment,a),a.forEach(i)},m(e,a){u(e,t,a),I(n,t,null),l=!0},p(e,t){const a={};4&t&&(a.rating=e[2]),n.$set(a)},i(e){l||(E(n.$$.fragment,e),b((()=>{r||(r=A(t,L,{x:500,y:-50,duration:600},!0)),r.run(1)})),l=!0)},o(e){v(n.$$.fragment,e),r||(r=A(t,L,{x:500,y:-50,duration:600},!1)),r.run(0),l=!1},d(e){e&&i(t),P(n),e&&r&&r.end()}}}function X(e){let t;return{c(){t=a("div")},l(e){t=o(e,"DIV",{}),s(t).forEach(i)},m(e,n){u(e,t,n)},p:m,i:m,o:m,d(e){e&&i(t)}}}function J(e){let t,n,m,w,x,D,I,b,A,P,_,C,O,N,S,V,R,k,j;const F=[K,H,G],L=[];function T(e,t){return e[5]?0:e[1]?1:2}O=T(e),N=L[O]=F[O](e);const B=[X,Q,z],M=[];function q(e,t){return e[6]?0:e[2]?1:2}return R=q(e),k=M[R]=B[R](e),{c(){t=a("game-board"),n=a("play-area"),m=a("div"),w=r(e[0]),x=p(),D=r(e[3]),I=p(),b=a("div"),A=r("Dunstan the Fun Sponge: "),P=r(e[4]),_=p(),C=a("card-area"),N.c(),S=p(),V=a("card-area"),k.c(),this.h()},l(a){t=o(a,"GAME-BOARD",{class:!0});var r=s(t);n=o(r,"PLAY-AREA",{class:!0});var c=s(n);m=o(c,"DIV",{class:!0});var u=s(m);w=l(u,e[0]),x=h(u),D=l(u,e[3]),u.forEach(i),I=h(c),b=o(c,"DIV",{class:!0});var d=s(b);A=l(d,"Dunstan the Fun Sponge: "),P=l(d,e[4]),d.forEach(i),_=h(c),C=o(c,"CARD-AREA",{});var f=s(C);N.l(f),f.forEach(i),S=h(c),V=o(c,"CARD-AREA",{});var p=s(V);k.l(p),p.forEach(i),c.forEach(i),r.forEach(i),this.h()},h(){c(m,"class","score svelte-r8fumq"),c(b,"class","score svelte-r8fumq"),g(n,"class","svelte-r8fumq"),g(t,"class","svelte-r8fumq")},m(e,a){u(e,t,a),d(t,n),d(n,m),d(m,w),d(m,x),d(m,D),d(n,I),d(n,b),d(b,A),d(b,P),d(n,_),d(n,C),L[O].m(C,null),d(n,S),d(n,V),M[R].m(V,null),j=!0},p(e,[t]){(!j||1&t)&&f(w,e[0]),(!j||8&t)&&f(D,e[3]),(!j||16&t)&&f(P,e[4]);let n=O;O=T(e),O===n?L[O].p(e,t):(y(),v(L[n],1,1,(()=>{L[n]=null})),$(),N=L[O],N?N.p(e,t):(N=L[O]=F[O](e),N.c()),E(N,1),N.m(C,null));let a=R;R=q(e),R===a?M[R].p(e,t):(y(),v(M[a],1,1,(()=>{M[a]=null})),$(),k=M[R],k?k.p(e,t):(k=M[R]=B[R](e),k.c()),E(k,1),k.m(V,null))},i(e){j||(E(N),E(k),j=!0)},o(e){v(N),v(k),j=!1},d(e){e&&i(t),L[O].d(),M[R].d()}}}function Z(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{i(a.next(e))}catch(e){o(e)}}function l(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}i((a=a.apply(e,t||[])).next())}))};let{scores:r}=t,{playerName:o}=t;const s=w("simple-modal"),l=e=>new Promise((t=>setTimeout(t,e)));let i,c,u,d,f,m,p,h,g=null,y=null;const v={styleBg:{background:"none",top:"1em",left:0},styleWindow:{background:"rgba(0,0,0,0.8)",width:"fit-content"},styleContent:{},transitionWindow:F,styleCloseButton:{display:"none",cursor:"pointer",borderRadius:"30%",boxShadow:"0 0 0 1px #00000033"}},$=()=>{const e=(e=>{const t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t})(r);i=e.splice(e.length/2),c=e,n(3,u=i.length),n(4,d=c.length),n(8,h="player"),n(5,f=!1),n(6,m=!1),n(7,p=!1)},E=({message:e,closeAfter:t=1e3})=>a(void 0,void 0,void 0,(function*(){const r=!p;n(7,p=!0);const o=()=>{s.close()};"undefined"!=typeof document&&document.addEventListener("keypress",o);const i=new Promise((t=>{s.isOpen=!0,s.open(W,{message:e},v,{onClose:()=>a(void 0,void 0,void 0,(function*(){s.isOpen=!1,t()}))})}));yield Promise.race([i,l(t)]),s.isClosed||s.close(),s.isOpen=!1,"undefined"!=typeof document&&document.removeEventListener("keypress",o),r&&n(7,p=!1)})),x=e=>a(void 0,void 0,void 0,(function*(){"computer"===e?(n(6,m=!0),yield l(1e3),n(2,y=c.shift()),n(6,m=!1)):(n(5,f=!0),yield l(1e3),n(1,g=i.shift()),n(5,f=!1))})),D=e=>a(void 0,void 0,void 0,(function*(){n(7,p=!0);const t=e.category;yield x("player"===h?"computer":"player"),yield l(1e3);return g[t]>=y[t]?(i.push(y),i.push(g),n(8,h="player"),yield E({message:"YOU WIN!!",closeAfter:3e3})):(c.push(y),c.push(g),n(8,h="computer"),yield E({message:"YOU LOSE!!",closeAfter:3e3})),n(3,u=i.length),n(4,d=c.length),yield a(void 0,void 0,void 0,(function*(){0===u?(yield E({message:"You have no cards left — Dunstan the Fun Sponge has won the game!!",closeAfter:3e3}),$()):0===d&&(yield E({message:"Dunstan the Fun Sponge has no cards left — you have won the game!!",closeAfter:3e3}),$())})),I()})),I=()=>a(void 0,void 0,void 0,(function*(){if(n(7,p=!0),(y||g)&&(n(6,m=!0),n(5,f=!0),yield l(1e3),n(6,m=!1),n(5,f=!1)),"computer"===h?n(1,g=null):n(2,y=null),yield x(h),yield l(1e3),yield E({message:"computer"===h?"It's Dunstan the Fun Sponges's turn…":"It's your turn. Pick a category…",closeAfter:2e3}),"player"===h)n(7,p=!1);else{const e=["battleyness","scandal","subjectivity","longevity","dynasty"].sort(((e,t)=>y[e]>y[t]?-1:y[e]<y[t]?1:0))[0];yield E({message:`Dunstan choses ${e}…`,closeAfter:1e3}),D({player:"computer",category:e})}}));$(),I();return e.$$set=e=>{"scores"in e&&n(10,r=e.scores),"playerName"in e&&n(0,o=e.playerName)},[o,g,y,u,d,f,m,p,h,D,r,e=>D({player:"player",category:e.detail})]}class ee extends e{constructor(e){super(),t(this,e,Z,J,n,{scores:10,playerName:0})}}function te(e){let t,n,r,l,c;return n=new ee({props:{scores:e[0],playerName:e[2]}}),{c(){t=a("div"),x(n.$$.fragment)},l(e){t=o(e,"DIV",{});var a=s(t);D(n.$$.fragment,a),a.forEach(i)},m(e,a){u(e,t,a),I(n,t,null),c=!0},p(e,t){const a={};1&t&&(a.scores=e[0]),4&t&&(a.playerName=e[2]),n.$set(a)},i(e){c||(E(n.$$.fragment,e),b((()=>{l&&l.end(1),r||(r=_(t,T,{delay:300,duration:200})),r.start()})),c=!0)},o(e){v(n.$$.fragment,e),r&&r.invalidate(),l=C(t,T,{duration:200}),c=!1},d(e){e&&i(t),P(n),e&&l&&l.end()}}}function ne(e){let t,n,f,m,g,y,$,w,A,O,F,L,M,q,Y,U,W,G,H,K,z,Q,X,J,Z,ee,te,ne,ae,re,oe,se,le;return n=new B({props:{title:"Rexplorer the Game",imagePath:"../king-and-queen-playing-chess.jpg",imageAlt:"King and Queen playing chess"}}),{c(){t=a("div"),x(n.$$.fragment),f=p(),m=a("p"),g=r("In the Rexplorer game you will pit your wits against Dunstan the Fun\n          Sponge!"),y=p(),$=a("p"),w=r("Choose your name and card category to play the game."),A=p(),O=a("form"),F=a("label"),L=r("Player name"),M=p(),q=a("input"),Y=p(),U=a("label"),W=r("Card category"),G=p(),H=a("select"),K=a("option"),z=r("English monarchs"),Q=a("option"),X=r("English consorts"),J=a("option"),Z=r("English royal teams"),ee=p(),te=a("button"),ne=r("Play the game!"),this.h()},l(e){t=o(e,"DIV",{});var a=s(t);D(n.$$.fragment,a),f=h(a),m=o(a,"P",{});var r=s(m);g=l(r,"In the Rexplorer game you will pit your wits against Dunstan the Fun\n          Sponge!"),r.forEach(i),y=h(a),$=o(a,"P",{});var c=s($);w=l(c,"Choose your name and card category to play the game."),c.forEach(i),A=h(a),O=o(a,"FORM",{class:!0});var u=s(O);F=o(u,"LABEL",{for:!0});var d=s(F);L=l(d,"Player name"),d.forEach(i),M=h(u),q=o(u,"INPUT",{type:!0}),Y=h(u),U=o(u,"LABEL",{for:!0});var p=s(U);W=l(p,"Card category"),p.forEach(i),G=h(u),H=o(u,"SELECT",{id:!0});var v=s(H);K=o(v,"OPTION",{value:!0});var E=s(K);z=l(E,"English monarchs"),E.forEach(i),Q=o(v,"OPTION",{value:!0});var x=s(Q);X=l(x,"English consorts"),x.forEach(i),J=o(v,"OPTION",{value:!0});var I=s(J);Z=l(I,"English royal teams"),I.forEach(i),v.forEach(i),ee=h(u),te=o(u,"BUTTON",{type:!0});var b=s(te);ne=l(b,"Play the game!"),b.forEach(i),u.forEach(i),a.forEach(i),this.h()},h(){c(F,"for","name"),c(q,"type","text"),c(U,"for","rating-type"),K.__value="monarchs",K.value=K.__value,Q.__value="consorts",Q.value=Q.__value,J.__value="teams",J.value=J.__value,c(H,"id","rating-type"),void 0===e[1]&&b((()=>e[5].call(H))),c(te,"type","sumbit"),c(O,"class","svelte-1jlkzna")},m(a,r){u(a,t,r),I(n,t,null),d(t,f),d(t,m),d(m,g),d(t,y),d(t,$),d($,w),d(t,A),d(t,O),d(O,F),d(F,L),d(O,M),d(O,q),N(q,e[2]),d(O,Y),d(O,U),d(U,W),d(O,G),d(O,H),d(H,K),d(K,z),d(H,Q),d(Q,X),d(H,J),d(J,Z),S(H,e[1]),d(O,ee),d(O,te),d(te,ne),oe=!0,se||(le=[V(q,"input",e[4]),V(H,"change",e[5]),V(O,"submit",R(k(e[3])))],se=!0)},p(e,t){4&t&&q.value!==e[2]&&N(q,e[2]),2&t&&S(H,e[1])},i(e){oe||(E(n.$$.fragment,e),b((()=>{re&&re.end(1),ae||(ae=_(t,T,{delay:300,duration:200})),ae.start()})),oe=!0)},o(e){v(n.$$.fragment,e),ae&&ae.invalidate(),re=C(t,T,{duration:200}),oe=!1},d(e){e&&i(t),P(n),e&&re&&re.end(),se=!1,j(le)}}}function ae(e){let t,n,r,l,c,d;const f=[ne,te],m=[];function p(e,t){return 0===e[0].length?0:1}return n=p(e),r=m[n]=f[n](e),{c(){t=a("div"),r.c()},l(e){t=o(e,"DIV",{});var n=s(t);r.l(n),n.forEach(i)},m(e,a){u(e,t,a),m[n].m(t,null),d=!0},p(e,a){let o=n;n=p(e),n===o?m[n].p(e,a):(y(),v(m[o],1,1,(()=>{m[o]=null})),$(),r=m[n],r?r.p(e,a):(r=m[n]=f[n](e),r.c()),E(r,1),r.m(t,null))},i(e){d||(E(r),b((()=>{c&&c.end(1),l||(l=_(t,T,{delay:300,duration:200})),l.start()})),d=!0)},o(e){v(r),l&&l.invalidate(),c=C(t,T,{duration:200}),d=!1},d(e){e&&i(t),m[n].d(),e&&c&&c.end()}}}function re(e){let t,n;return t=new q({props:{$$slots:{default:[ae]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,a){I(t,e,a),n=!0},p(e,[n]){const a={};135&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){P(t,e)}}}function oe(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function s(e){try{i(a.next(e))}catch(e){o(e)}}function l(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}i((a=a.apply(e,t||[])).next())}))};let r=[],o="monarchs",s="Player";return[r,o,s,()=>a(void 0,void 0,void 0,(function*(){console.log("FETCHING SCORES....");const e=yield fetch(`data/${o}.json`),t=yield e.json();200===e.status?n(0,r=t.scores):this.error(e.status,e.statusText)})),function(){s=this.value,n(2,s)},function(){o=O(this),n(1,o)}]}export default class extends e{constructor(e){super(),t(this,e,oe,re,n,{})}}
