import{S as e,i as n,s,e as t,a,c as o,q as r,b as i,d as c,f as l,h as d,j as m,k as h,l as g,m as u,t as f,o as $,r as p,B as F,g as w,u as R,v,p as k}from"./client.e45411bd.js";import{f as x}from"./Banner.d03f0b9d.js";import"./_common-styles.9c34c28b.js";import{g as j,M as y,R as L,s as E}from"./Modal.e4dc3000.js";function b(e){let n,s,a,r,l;return s=new L({props:{ratingName:"English monarchs",linkedRatingName:"consorts",ratingImageSrc:"english-monarch-crown.jpg",ratingImageAlt:"English monarch crown",scores:e[3],sortField:e[0],showLinkedRatings:e[1],nameFilter:e[2]}}),s.$on("change",e[4]),{c(){n=t("div"),o(s.$$.fragment)},l(e){n=i(e,"DIV",{});var t=w(n);d(s.$$.fragment,t),t.forEach(c)},m(e,t){g(e,n,t),u(s,n,null),l=!0},p(e,n){const t={};8&n&&(t.scores=e[3]),1&n&&(t.sortField=e[0]),2&n&&(t.showLinkedRatings=e[1]),4&n&&(t.nameFilter=e[2]),s.$set(t)},i(e){l||(f(s.$$.fragment,e),R((()=>{r&&r.end(1),a||(a=v(n,x,{delay:300,duration:200})),a.start()})),l=!0)},o(e){$(s.$$.fragment,e),a&&a.invalidate(),r=k(n,x,{duration:200}),l=!1},d(e){e&&c(n),p(s),e&&r&&r.end()}}}function M(e){let n,s,F,w;return F=new y({props:{$$slots:{default:[b]},$$scope:{ctx:e}}}),{c(){n=t("meta"),s=a(),o(F.$$.fragment),this.h()},l(e){const t=r('[data-svelte="svelte-yx9k2o"]',document.head);n=i(t,"META",{name:!0,content:!0}),t.forEach(c),s=l(e),d(F.$$.fragment,e),this.h()},h(){document.title="Rexplorer monarchs",m(n,"name","Description"),m(n,"content","Rexplorer for exploring Rex Factor scores for English Monarchs")},m(e,t){h(document.head,n),g(e,s,t),u(F,e,t),w=!0},p(e,[n]){const s={};47&n&&(s.$$scope={dirty:n,ctx:e}),F.$set(s)},i(e){w||(f(F.$$.fragment,e),w=!0)},o(e){$(F.$$.fragment,e),w=!1},d(e){c(n),e&&c(s),p(F,e)}}}var I=function(e,n,s,t){return new(s||(s=Promise))((function(a,o){function r(e){try{c(t.next(e))}catch(e){o(e)}}function i(e){try{c(t.throw(e))}catch(e){o(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof s?n:new s((function(e){e(n)}))).then(r,i)}c((t=t.apply(e,n||[])).next())}))};function q(e){return I(this,void 0,void 0,(function*(){const n=yield this.fetch("data/monarchs.json"),s=yield n.json();if(200===n.status)return((null==s?void 0:s.scores)||[]).forEach((e=>{e.linkedRatings=e.consorts||[]})),Object.assign(Object.assign({},j(e.query)),s);this.error(n.status,s.message)}))}function A(e,n,s){let{scores:t=[]}=n,{sortField:a=null}=n,{showLinkedRatings:o=!1}=n,{nameFilter:r=null}=n;F((()=>E({sortField:a,showLinkedRatings:o,nameFilter:r})));return e.$$set=e=>{"scores"in e&&s(3,t=e.scores),"sortField"in e&&s(0,a=e.sortField),"showLinkedRatings"in e&&s(1,o=e.showLinkedRatings),"nameFilter"in e&&s(2,r=e.nameFilter)},[a,o,r,t,e=>{console.log(e),s(0,a=e.detail.sortField),s(1,o=e.detail.showLinkedRatings),s(2,r=e.detail.nameFilter)}]}export default class extends e{constructor(e){super(),n(this,e,A,M,s,{scores:3,sortField:0,showLinkedRatings:1,nameFilter:2})}}export{q as preload};
