import{S as e,i as t,s as n,e as s,w as o,b as r,g as a,x as c,d as i,j as l,l as u,k as d,A as f,n as m,a as p,f as h,Y as g,K as v,o as $,L as y,t as x,_ as w,c as E,h as D,m as A,u as b,O as I,r as k,v as V,p as C}from"./client.818c03b4.js";import{s as j,a as O,f as S}from"./index.bf316240.js";import"./_common-styles.9c34c28b.js";import{C as P,M as R}from"./Modal.d51c73e5.js";function Y(e){let t,n,p;return{c(){t=s("div"),n=s("div"),p=o(e[0]),this.h()},l(s){t=r(s,"DIV",{class:!0});var o=a(t);n=r(o,"DIV",{});var l=a(n);p=c(l,e[0]),l.forEach(i),o.forEach(i),this.h()},h(){l(t,"class","popup svelte-1eosodn")},m(e,s){u(e,t,s),d(t,n),d(n,p)},p(e,[t]){1&t&&f(p,e[0])},i:m,o:m,d(e){e&&i(t)}}}function M(e,t,n){let{message:s}=t;return e.$$set=e=>{"message"in e&&n(0,s=e.message)},[s]}class F extends e{constructor(e){super(),t(this,e,M,Y,n,{message:0})}}function L(e){let t,n,o,c;return n=new P({props:{rating:null}}),{c(){t=s("div"),E(n.$$.fragment)},l(e){t=r(e,"DIV",{});var s=a(t);D(n.$$.fragment,s),s.forEach(i)},m(e,s){u(e,t,s),A(n,t,null),c=!0},p:m,i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,O,{x:-500,y:50,duration:300},!0)),o.run(1)})),c=!0)},o(e){$(n.$$.fragment,e),o||(o=I(t,O,{x:-500,y:50,duration:300},!1)),o.run(0),c=!1},d(e){e&&i(t),k(n),e&&o&&o.end()}}}function q(e){let t,n,o,c;return n=new P({props:{rating:e[0],clickableCategories:!e[6]&&"player"===e[7]}}),n.$on("select",e[10]),{c(){t=s("div"),E(n.$$.fragment)},l(e){t=r(e,"DIV",{});var s=a(t);D(n.$$.fragment,s),s.forEach(i)},m(e,s){u(e,t,s),A(n,t,null),c=!0},p(e,t){const s={};1&t&&(s.rating=e[0]),192&t&&(s.clickableCategories=!e[6]&&"player"===e[7]),n.$set(s)},i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,O,{x:-500,y:50,duration:300},!0)),o.run(1)})),c=!0)},o(e){$(n.$$.fragment,e),o||(o=I(t,O,{x:-500,y:50,duration:300},!1)),o.run(0),c=!1},d(e){e&&i(t),k(n),e&&o&&o.end()}}}function z(e){let t;return{c(){t=s("div")},l(e){t=r(e,"DIV",{}),a(t).forEach(i)},m(e,n){u(e,t,n)},p:m,i:m,o:m,d(e){e&&i(t)}}}function _(e){let t,n,o,c;return n=new P({props:{rating:null}}),{c(){t=s("div"),E(n.$$.fragment)},l(e){t=r(e,"DIV",{});var s=a(t);D(n.$$.fragment,s),s.forEach(i)},m(e,s){u(e,t,s),A(n,t,null),c=!0},p:m,i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,O,{x:500,y:-50,duration:600},!0)),o.run(1)})),c=!0)},o(e){$(n.$$.fragment,e),o||(o=I(t,O,{x:500,y:-50,duration:600},!1)),o.run(0),c=!1},d(e){e&&i(t),k(n),e&&o&&o.end()}}}function B(e){let t,n,o,c;return n=new P({props:{rating:e[1],clickableCategories:!1}}),{c(){t=s("div"),E(n.$$.fragment)},l(e){t=r(e,"DIV",{});var s=a(t);D(n.$$.fragment,s),s.forEach(i)},m(e,s){u(e,t,s),A(n,t,null),c=!0},p(e,t){const s={};2&t&&(s.rating=e[1]),n.$set(s)},i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,O,{x:500,y:-50,duration:600},!0)),o.run(1)})),c=!0)},o(e){$(n.$$.fragment,e),o||(o=I(t,O,{x:500,y:-50,duration:600},!1)),o.run(0),c=!1},d(e){e&&i(t),k(n),e&&o&&o.end()}}}function W(e){let t;return{c(){t=s("div")},l(e){t=r(e,"DIV",{}),a(t).forEach(i)},m(e,n){u(e,t,n)},p:m,i:m,o:m,d(e){e&&i(t)}}}function U(e){let t,n,m,w,E,D,A,b,I,k,V,C,j,O,S,P,R,Y;const M=[z,q,L],F=[];function U(e,t){return e[4]?0:e[0]?1:2}C=U(e),j=F[C]=M[C](e);const G=[W,B,_],K=[];function N(e,t){return e[5]?0:e[1]?1:2}return P=N(e),R=K[P]=G[P](e),{c(){t=s("game-board"),n=s("play-area"),m=s("div"),w=o("You: "),E=o(e[2]),D=p(),A=s("div"),b=o("Dunstan the Fun Sponge: "),I=o(e[3]),k=p(),V=s("card-area"),j.c(),O=p(),S=s("card-area"),R.c(),this.h()},l(s){t=r(s,"GAME-BOARD",{class:!0});var o=a(t);n=r(o,"PLAY-AREA",{class:!0});var l=a(n);m=r(l,"DIV",{class:!0});var u=a(m);w=c(u,"You: "),E=c(u,e[2]),u.forEach(i),D=h(l),A=r(l,"DIV",{class:!0});var d=a(A);b=c(d,"Dunstan the Fun Sponge: "),I=c(d,e[3]),d.forEach(i),k=h(l),V=r(l,"CARD-AREA",{});var f=a(V);j.l(f),f.forEach(i),O=h(l),S=r(l,"CARD-AREA",{});var p=a(S);R.l(p),p.forEach(i),l.forEach(i),o.forEach(i),this.h()},h(){l(m,"class","score svelte-1uzxkqf"),l(A,"class","score svelte-1uzxkqf"),g(n,"class","svelte-1uzxkqf"),g(t,"class","svelte-1uzxkqf")},m(e,s){u(e,t,s),d(t,n),d(n,m),d(m,w),d(m,E),d(n,D),d(n,A),d(A,b),d(A,I),d(n,k),d(n,V),F[C].m(V,null),d(n,O),d(n,S),K[P].m(S,null),Y=!0},p(e,[t]){(!Y||4&t)&&f(E,e[2]),(!Y||8&t)&&f(I,e[3]);let n=C;C=U(e),C===n?F[C].p(e,t):(v(),$(F[n],1,1,(()=>{F[n]=null})),y(),j=F[C],j?j.p(e,t):(j=F[C]=M[C](e),j.c()),x(j,1),j.m(V,null));let s=P;P=N(e),P===s?K[P].p(e,t):(v(),$(K[s],1,1,(()=>{K[s]=null})),y(),R=K[P],R?R.p(e,t):(R=K[P]=G[P](e),R.c()),x(R,1),R.m(S,null))},i(e){Y||(x(j),x(R),Y=!0)},o(e){$(j),$(R),Y=!1},d(e){e&&i(t),F[C].d(),K[P].d()}}}function G(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function a(e){try{i(s.next(e))}catch(e){r(e)}}function c(e){try{i(s.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}i((s=s.apply(e,t||[])).next())}))};let{scores:o}=t;const r=w("simple-modal"),a=e=>new Promise((t=>setTimeout(t,e)));let c,i,l,u,d,f,m,p,h=null,g=null;const v={styleBg:{background:"none",top:"1em",left:0},styleWindow:{background:"rgba(0,0,0,0.8)",width:"fit-content"},styleContent:{},transitionWindow:j,styleCloseButton:{display:"none",cursor:"pointer",borderRadius:"30%",boxShadow:"0 0 0 1px #00000033"}},$=()=>{const e=(e=>{const t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t})(o);c=e.splice(e.length/2),i=e,n(2,l=c.length),n(3,u=i.length),n(7,p="player"),n(4,d=!1),n(5,f=!1),n(6,m=!1)},y=({message:e,closeAfter:t=1e3})=>s(void 0,void 0,void 0,(function*(){const o=!m;n(6,m=!0);const c=()=>{r.close()};"undefined"!=typeof document&&document.addEventListener("keypress",c);const i=new Promise((t=>{r.isOpen=!0,r.open(F,{message:e},v,{onClose:()=>s(void 0,void 0,void 0,(function*(){r.isOpen=!1,t()}))})}));yield Promise.race([i,a(t)]),r.isClosed||r.close(),r.isOpen=!1,"undefined"!=typeof document&&document.removeEventListener("keypress",c),o&&n(6,m=!1)})),x=e=>s(void 0,void 0,void 0,(function*(){"computer"===e?(n(5,f=!0),yield a(1e3),n(1,g=i.shift()),n(5,f=!1)):(n(4,d=!0),yield a(1e3),n(0,h=c.shift()),n(4,d=!1))})),E=e=>s(void 0,void 0,void 0,(function*(){n(6,m=!0);const t=e.category;yield x("player"===p?"computer":"player"),yield a(1e3);return h[t]>=g[t]?(c.push(g),c.push(h),n(7,p="player"),yield y({message:"YOU WIN!!",closeAfter:2e3})):(i.push(g),i.push(h),n(7,p="computer"),yield y({message:"YOU LOSE!!",closeAfter:2e3})),n(2,l=c.length),n(3,u=i.length),yield s(void 0,void 0,void 0,(function*(){0===l?(yield y({message:"You have no cards left — Dunstan the Fun Sponge has won the game!!",closeAfter:3e3}),$()):0===u&&(yield y({message:"Dunstan the Fun Sponge has no cards left — you have won the game!!",closeAfter:3e3}),$())})),D()})),D=()=>s(void 0,void 0,void 0,(function*(){if(n(6,m=!0),(g||h)&&(n(5,f=!0),n(4,d=!0),yield a(1e3),n(5,f=!1),n(4,d=!1)),"computer"===p?n(0,h=null):n(1,g=null),yield x(p),yield a(1e3),yield y({message:"computer"===p?"It's Dunstan the Fun Sponges's turn…":"It's your turn. Pick a category…",closeAfter:2e3}),"player"===p)n(6,m=!1);else{const e=["battleyness","scandal","subjectivity","longevity","dynasty"].sort(((e,t)=>g[e]>g[t]?-1:g[e]<g[t]?1:0))[0];yield y({message:`Dunstan choses ${e}…`,closeAfter:1e3}),E({player:"computer",category:e})}}));$(),D();return e.$$set=e=>{"scores"in e&&n(9,o=e.scores)},[h,g,l,u,d,f,m,p,E,o,e=>E({player:"player",category:e.detail})]}class K extends e{constructor(e){super(),t(this,e,G,U,n,{scores:9})}}function N(e){let t,n,o,c,l;return n=new K({props:{scores:e[0]}}),{c(){t=s("div"),E(n.$$.fragment)},l(e){t=r(e,"DIV",{});var s=a(t);D(n.$$.fragment,s),s.forEach(i)},m(e,s){u(e,t,s),A(n,t,null),l=!0},p(e,t){const s={};1&t&&(s.scores=e[0]),n.$set(s)},i(e){l||(x(n.$$.fragment,e),b((()=>{c&&c.end(1),o||(o=V(t,S,{delay:300,duration:200})),o.start()})),l=!0)},o(e){$(n.$$.fragment,e),o&&o.invalidate(),c=C(t,S,{duration:200}),l=!1},d(e){e&&i(t),k(n),e&&c&&c.end()}}}function T(e){let t,n;return t=new R({props:{$$slots:{default:[N]},$$scope:{ctx:e}}}),{c(){E(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){A(t,e,s),n=!0},p(e,[n]){const s={};3&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(x(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}var H=function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function a(e){try{i(s.next(e))}catch(e){r(e)}}function c(e){try{i(s.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}i((s=s.apply(e,t||[])).next())}))};function J(){return H(this,void 0,void 0,(function*(){const e=yield this.fetch("data/monarchs.json"),t=yield e.json();if(200===e.status)return t;this.error(e.status,e.statusMessage)}))}function Q(e,t,n){let{scores:s}=t;return e.$$set=e=>{"scores"in e&&n(0,s=e.scores)},[s]}export default class extends e{constructor(e){super(),t(this,e,Q,T,n,{scores:0})}}export{J as preload};
