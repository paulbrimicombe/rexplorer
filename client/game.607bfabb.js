import{S as e,i as t,s as n,e as s,w as o,b as a,g as r,x as c,d as l,j as i,l as u,k as d,A as f,n as m,a as p,f as h,Y as g,K as $,o as y,L as v,t as x,_ as E,c as w,h as D,m as C,u as b,O as I,r as k,v as A,p as V}from"./client.6451e7c1.js";import{a as j,s as M,f as S}from"./index.9db3677c.js";import"./_common-styles.9c34c28b.js";import{C as R,M as Y}from"./Modal.5f4c7c9c.js";function F(e){let t,n,p;return{c(){t=s("div"),n=s("div"),p=o(e[0]),this.h()},l(s){t=a(s,"DIV",{class:!0});var o=r(t);n=a(o,"DIV",{});var i=r(n);p=c(i,e[0]),i.forEach(l),o.forEach(l),this.h()},h(){i(t,"class","popup svelte-1eosodn")},m(e,s){u(e,t,s),d(t,n),d(n,p)},p(e,[t]){1&t&&f(p,e[0])},i:m,o:m,d(e){e&&l(t)}}}function L(e,t,n){let{message:s}=t;return e.$$set=e=>{"message"in e&&n(0,s=e.message)},[s]}class O extends e{constructor(e){super(),t(this,e,L,F,n,{message:0})}}function P(e){let t,n,o,c;return n=new R({props:{rating:null}}),{c(){t=s("div"),w(n.$$.fragment)},l(e){t=a(e,"DIV",{});var s=r(t);D(n.$$.fragment,s),s.forEach(l)},m(e,s){u(e,t,s),C(n,t,null),c=!0},p:m,i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,j,{x:-500,y:50,duration:300},!0)),o.run(1)})),c=!0)},o(e){y(n.$$.fragment,e),o||(o=I(t,j,{x:-500,y:50,duration:300},!1)),o.run(0),c=!1},d(e){e&&l(t),k(n),e&&o&&o.end()}}}function _(e){let t,n,o,c;return n=new R({props:{rating:e[0],clickableCategories:!e[6]&&"player"===e[7]}}),n.$on("select",e[10]),{c(){t=s("div"),w(n.$$.fragment)},l(e){t=a(e,"DIV",{});var s=r(t);D(n.$$.fragment,s),s.forEach(l)},m(e,s){u(e,t,s),C(n,t,null),c=!0},p(e,t){const s={};1&t&&(s.rating=e[0]),192&t&&(s.clickableCategories=!e[6]&&"player"===e[7]),n.$set(s)},i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,j,{x:-500,y:50,duration:300},!0)),o.run(1)})),c=!0)},o(e){y(n.$$.fragment,e),o||(o=I(t,j,{x:-500,y:50,duration:300},!1)),o.run(0),c=!1},d(e){e&&l(t),k(n),e&&o&&o.end()}}}function B(e){let t;return{c(){t=s("div")},l(e){t=a(e,"DIV",{}),r(t).forEach(l)},m(e,n){u(e,t,n)},p:m,i:m,o:m,d(e){e&&l(t)}}}function W(e){let t,n,o,c;return n=new R({props:{rating:null}}),{c(){t=s("div"),w(n.$$.fragment)},l(e){t=a(e,"DIV",{});var s=r(t);D(n.$$.fragment,s),s.forEach(l)},m(e,s){u(e,t,s),C(n,t,null),c=!0},p:m,i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,j,{x:500,y:-50,duration:600},!0)),o.run(1)})),c=!0)},o(e){y(n.$$.fragment,e),o||(o=I(t,j,{x:500,y:-50,duration:600},!1)),o.run(0),c=!1},d(e){e&&l(t),k(n),e&&o&&o.end()}}}function U(e){let t,n,o,c;return n=new R({props:{rating:e[1],clickableCategories:!1}}),{c(){t=s("div"),w(n.$$.fragment)},l(e){t=a(e,"DIV",{});var s=r(t);D(n.$$.fragment,s),s.forEach(l)},m(e,s){u(e,t,s),C(n,t,null),c=!0},p(e,t){const s={};2&t&&(s.rating=e[1]),n.$set(s)},i(e){c||(x(n.$$.fragment,e),b((()=>{o||(o=I(t,j,{x:500,y:-50,duration:600},!0)),o.run(1)})),c=!0)},o(e){y(n.$$.fragment,e),o||(o=I(t,j,{x:500,y:-50,duration:600},!1)),o.run(0),c=!1},d(e){e&&l(t),k(n),e&&o&&o.end()}}}function G(e){let t;return{c(){t=s("div")},l(e){t=a(e,"DIV",{}),r(t).forEach(l)},m(e,n){u(e,t,n)},p:m,i:m,o:m,d(e){e&&l(t)}}}function K(e){let t,n,m,E,w,D,C,b,I,k,A,V,j,M,S,R,Y,F;const L=[B,_,P],O=[];function K(e,t){return e[4]?0:e[0]?1:2}V=K(e),j=O[V]=L[V](e);const N=[G,U,W],T=[];function q(e,t){return e[5]?0:e[1]?1:2}return R=q(e),Y=T[R]=N[R](e),{c(){t=s("game-board"),n=s("play-area"),m=s("div"),E=o("You: "),w=o(e[2]),D=p(),C=s("div"),b=o("Dunstan the Fun Sponge: "),I=o(e[3]),k=p(),A=s("card-area"),j.c(),M=p(),S=s("card-area"),Y.c(),this.h()},l(s){t=a(s,"GAME-BOARD",{class:!0});var o=r(t);n=a(o,"PLAY-AREA",{class:!0});var i=r(n);m=a(i,"DIV",{class:!0});var u=r(m);E=c(u,"You: "),w=c(u,e[2]),u.forEach(l),D=h(i),C=a(i,"DIV",{class:!0});var d=r(C);b=c(d,"Dunstan the Fun Sponge: "),I=c(d,e[3]),d.forEach(l),k=h(i),A=a(i,"CARD-AREA",{});var f=r(A);j.l(f),f.forEach(l),M=h(i),S=a(i,"CARD-AREA",{});var p=r(S);Y.l(p),p.forEach(l),i.forEach(l),o.forEach(l),this.h()},h(){i(m,"class","score svelte-1tye1kc"),i(C,"class","score svelte-1tye1kc"),g(n,"class","svelte-1tye1kc"),g(t,"class","svelte-1tye1kc")},m(e,s){u(e,t,s),d(t,n),d(n,m),d(m,E),d(m,w),d(n,D),d(n,C),d(C,b),d(C,I),d(n,k),d(n,A),O[V].m(A,null),d(n,M),d(n,S),T[R].m(S,null),F=!0},p(e,[t]){(!F||4&t)&&f(w,e[2]),(!F||8&t)&&f(I,e[3]);let n=V;V=K(e),V===n?O[V].p(e,t):($(),y(O[n],1,1,(()=>{O[n]=null})),v(),j=O[V],j?j.p(e,t):(j=O[V]=L[V](e),j.c()),x(j,1),j.m(A,null));let s=R;R=q(e),R===s?T[R].p(e,t):($(),y(T[s],1,1,(()=>{T[s]=null})),v(),Y=T[R],Y?Y.p(e,t):(Y=T[R]=N[R](e),Y.c()),x(Y,1),Y.m(S,null))},i(e){F||(x(j),x(Y),F=!0)},o(e){y(j),y(Y),F=!1},d(e){e&&l(t),O[V].d(),T[R].d()}}}function N(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,a){function r(e){try{l(s.next(e))}catch(e){a(e)}}function c(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}l((s=s.apply(e,t||[])).next())}))};let{scores:o}=t;const a=E("simple-modal"),r=e=>new Promise((t=>setTimeout(t,e)));let c,l,i,u,d,f,m,p,h=null,g=null;const $={styleBg:{background:"none",top:0,left:0},styleWindow:{background:"rgba(0,0,0,0.8)",width:"fit-content"},styleContent:{},transitionWindow:M,styleCloseButton:{display:"none",cursor:"pointer",borderRadius:"30%",boxShadow:"0 0 0 1px #00000033"}},y=()=>{const e=(e=>{const t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t})(o);c=e.splice(e.length/2),l=e,n(2,i=c.length),n(3,u=l.length),n(7,p="player"),n(4,d=!1),n(5,f=!1),n(6,m=!1),D()},v=({message:e,onClose:t=(()=>{})})=>{const s=!m;n(6,m=!0);const o=()=>{a.close()};"undefined"!=typeof document&&document.addEventListener("keypress",o),a.open(O,{message:e},$,{onClose:()=>{"undefined"!=typeof document&&document.removeEventListener("keypress",o),t(),s&&n(6,m=!1)}})},x=e=>s(void 0,void 0,void 0,(function*(){"computer"===e?(n(5,f=!0),yield r(1e3),n(1,g=l.shift()),n(5,f=!1)):(n(4,d=!0),yield r(1e3),n(0,h=c.shift()),n(4,d=!1))})),w=e=>s(void 0,void 0,void 0,(function*(){n(6,m=!0);const t=e.category;yield x("player"===p?"computer":"player"),yield r(1e3);h[t]>=g[t]?(c.push(g),c.push(h),n(7,p="player"),v({message:"YOU WIN!!",onClose:D})):(l.push(g),l.push(h),n(7,p="computer"),v({message:"YOU LOSE!!",onClose:D})),n(2,i=c.length),n(3,u=l.length),0===i?v({message:"You have no cards left — Dunstan the Fun Sponge has won the game!",onClose:()=>y()}):0===u&&v({message:"Dunstan the Fun Sponge has no cards left — you have won the game!",onClose:()=>y()})})),D=()=>s(void 0,void 0,void 0,(function*(){if(n(6,m=!0),(g||h)&&(n(5,f=!0),n(4,d=!0),yield r(1e3),n(5,f=!1),n(4,d=!1)),"computer"===p?n(0,h=null):n(1,g=null),yield x(p),yield r(1e3),v({message:"computer"===p?"It's Dunstan the Fun Sponges's turn…":"It's your turn. Pick a category…",onClose:"player"===p?()=>n(6,m=!1):void 0}),yield r(2e3),a.close(),"computer"===p){const e=["battleyness","scandal","subjectivity","longevity","dynasty"],t=e[Math.floor(Math.random()*(e.length-1))];v({message:`Dunstan choses ${t}…`}),yield r(1e3),a.close(),w({player:"computer",category:t})}else n(6,m=!1)}));y();return e.$$set=e=>{"scores"in e&&n(9,o=e.scores)},[h,g,i,u,d,f,m,p,w,o,e=>w({player:"player",category:e.detail})]}class T extends e{constructor(e){super(),t(this,e,N,K,n,{scores:9})}}function q(e){let t,n,o,c,i;return n=new T({props:{scores:e[0]}}),{c(){t=s("div"),w(n.$$.fragment)},l(e){t=a(e,"DIV",{});var s=r(t);D(n.$$.fragment,s),s.forEach(l)},m(e,s){u(e,t,s),C(n,t,null),i=!0},p(e,t){const s={};1&t&&(s.scores=e[0]),n.$set(s)},i(e){i||(x(n.$$.fragment,e),b((()=>{c&&c.end(1),o||(o=A(t,S,{delay:300,duration:200})),o.start()})),i=!0)},o(e){y(n.$$.fragment,e),o&&o.invalidate(),c=V(t,S,{duration:200}),i=!1},d(e){e&&l(t),k(n),e&&c&&c.end()}}}function z(e){let t,n;return t=new Y({props:{$$slots:{default:[q]},$$scope:{ctx:e}}}),{c(){w(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){C(t,e,s),n=!0},p(e,[n]){const s={};3&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(x(t.$$.fragment,e),n=!0)},o(e){y(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}var H=function(e,t,n,s){return new(n||(n=Promise))((function(o,a){function r(e){try{l(s.next(e))}catch(e){a(e)}}function c(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}l((s=s.apply(e,t||[])).next())}))};function J(){return H(this,void 0,void 0,(function*(){const e=yield this.fetch("data/monarchs.json"),t=yield e.json();if(200===e.status)return t;this.error(e.status,e.statusMessage)}))}function Q(e,t,n){let{scores:s}=t;return e.$$set=e=>{"scores"in e&&n(0,s=e.scores)},[s]}export default class extends e{constructor(e){super(),t(this,e,Q,z,n,{scores:0})}}export{J as preload};
